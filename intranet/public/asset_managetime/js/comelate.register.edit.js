function loadEditGetDaysApply(){var e=new Date(startDateDefault),t=new Date(endDateDefault),a=864e5,c=e.getTime(),o=t.getTime(),d=Math.abs(c-o),r=Math.round(d/a),s=countDaysApply-1,n=0;if(e.getDay()>t.getDay()){for(i=1;i<=t.getDay();i++)n++;for(i=e.getDay();i<=5;i++)n++}if(e.getDay()<t.getDay())for(i=e.getDay();i<=t.getDay();i++)6!=i&&n++;if(n==countDaysApply&&$("#select_all_day").iCheck("check"),4==s?$("#select_all_day").iCheck("check"):s==r&&$("#select_all_day").iCheck("check"),0==r||1==r&&6==e.getDay()&&0==t.getDay())hideDaysOfWeek();else if(0<r&&r<6){$(".col-monday").hide(),$(".col-tuesday").hide(),$(".col-wednesday").hide(),$(".col-thursday").hide(),$(".col-friday").hide(),$(".col-all-day").show(),$("#all_day_hidden").val("");var h=[];if(e.getDay()<t.getDay()){for(i=e.getDay();i<=t.getDay();i++)getDay=checkDays(i),null!=getDay&&h.push(getDay);$("#all_day_hidden").val(h.join(", "))}else if(e.getDay()>t.getDay()){for(i=0;i<=t.getDay();i++)getDay=checkDays(i),null!=getDay&&h.push(getDay);for(i=e.getDay();i<=6;i++)getDay=checkDays(i),null!=getDay&&h.push(getDay);$("#all_day_hidden").val(h.join(", "))}}else showDaysOfWeek()}function hideDaysOfWeek(){$(".col-monday").hide(),$(".col-tuesday").hide(),$(".col-wednesday").hide(),$(".col-thursday").hide(),$(".col-friday").hide(),$(".col-all-day").hide(),$("#select_all_day, #monday, #tuesday, #wednesday, #thursday, #friday").iCheck("uncheck"),$("#all_day_hidden").val("")}function showDaysOfWeek(){$(".col-monday").show(),$(".col-tuesday").show(),$(".col-wednesday").show(),$(".col-thursday").show(),$(".col-friday").show(),$(".col-all-day").show();var e=["1","2","3","4","5"];$("#all_day_hidden").val(e.join(", "))}function checkDays(e){return monday=$("#monday input[type='checkbox']").val(),tuesday=$("#tuesday input[type='checkbox']").val(),wednesday=$("#wednesday input[type='checkbox']").val(),thursday=$("#thursday input[type='checkbox']").val(),friday=$("#friday input[type='checkbox']").val(),getDay=null,e==monday&&($(".col-monday").show(),getDay="1"),e==tuesday&&($(".col-tuesday").show(),getDay="2"),e==wednesday&&($(".col-wednesday").show(),getDay="3"),e==thursday&&($(".col-thursday").show(),getDay="4"),e==friday&&($(".col-friday").show(),getDay="5"),getDay}function countCheckboxShow(){return count_checkbox_show=0,$(".col-monday").is(":visible")&&count_checkbox_show++,$(".col-tuesday").is(":visible")&&count_checkbox_show++,$(".col-wednesday").is(":visible")&&count_checkbox_show++,$(".col-thursday").is(":visible")&&count_checkbox_show++,$(".col-friday").is(":visible")&&count_checkbox_show++,count_checkbox_show}function countCheckboxChecked(){return count_checkbox_checked=0,$(".col-monday").is(":visible")&&$("#monday input[type='checkbox']").prop("checked")&&count_checkbox_checked++,$(".col-tuesday").is(":visible")&&$("#tuesday input[type='checkbox']").prop("checked")&&count_checkbox_checked++,$(".col-wednesday").is(":visible")&&$("#wednesday input[type='checkbox']").prop("checked")&&count_checkbox_checked++,$(".col-thursday").is(":visible")&&$("#thursday input[type='checkbox']").prop("checked")&&count_checkbox_checked++,$(".col-friday").is(":visible")&&$("#friday input[type='checkbox']").prop("checked")&&count_checkbox_checked++,count_checkbox_checked}function checkFormComelateRegister(){var e=$("#check_status").val();if(4==e)return $("#show_notification").text(notificationStatusApproved),$("#modal_allow_edit").modal("show"),!1;if(1==e)return $("#show_notification").text(notificationStatusCanceled),$("#modal_allow_edit").modal("show"),!1;if(status=1,$("#check_submit").val(1),startDate=$("#datetimepicker-start-date").datepicker("getDate"),null==startDate&&($("#start_date-error").show(),status=0),endDate=$("#datetimepicker-end-date").datepicker("getDate"),null==endDate&&($("#end_date-error").show(),status=0),null!=startDate&&null!=endDate){var t=$("#register_id").val(),a=checkExistRegister($("#start_date").val(),$("#end_date").val(),t);a&&($("#register_exist_error").show(),status=0)}return approver=$("#approver").val(),null==approver&&($("#approver-error").show(),status=0),lateStartShift=$("#late_start_shift").val().trim(),earlyMidShift=$("#early_mid_shift").val().trim(),lateMidShift=$("#late_mid_shift").val().trim(),earlyEndShift=$("#early_end_shift").val().trim(),(""==lateStartShift&&""==earlyMidShift&&""==lateMidShift&&""==earlyEndShift||0==lateStartShift&&0==earlyMidShift&&0==lateMidShift&&0==earlyEndShift)&&($("#error-time").show(),status=0),reasonRegister=$("#reason").val().trim(),""==reasonRegister&&($("#reason-error").show(),status=0),0!=status}function checkExistRegister(e,t,a){var c=!1;return"undefined"==typeof a&&(a=null),$.ajax({type:"GET",url:urlCheckRegisterExist,data:{registerId:a,startDate:e,endDate:t},async:!1,success:function(e){c=e}}),c}function showCheckDayApply(e,t){if(null!==e&&null!==t){if(ONE_DAY=864e5,startDate_ms=e.getTime(),endDate_ms=t.getTime(),difference_ms=Math.abs(startDate_ms-endDate_ms),difference_day=Math.round(difference_ms/ONE_DAY),0===difference_day||1===difference_day&&6===e.getDay()&&0===t.getDay())hideDaysOfWeek();else if(0<difference_day&&difference_day<6){$(".col-monday").hide(),$(".col-tuesday").hide(),$(".col-wednesday").hide(),$(".col-thursday").hide(),$(".col-friday").hide(),$(".col-all-day").show(),$("#select_all_day, #monday, #tuesday, #wednesday, #thursday, #friday").iCheck("uncheck"),$("#all_day_hidden").val("");var a=[];if(e.getDay()<t.getDay()){for(i=e.getDay();i<=t.getDay();i++)getDay=checkDays(i),null!==getDay&&a.push(getDay);$("#all_day_hidden").val(a.join(", "))}else if(e.getDay()>t.getDay()){for(i=0;i<=t.getDay();i++)getDay=checkDays(i),null!==getDay&&a.push(getDay);for(i=e.getDay();i<=6;i++)getDay=checkDays(i),null!==getDay&&a.push(getDay);$("#all_day_hidden").val(a.join(", "))}}else showDaysOfWeek();$("#select_all_day, #monday, #tuesday, #wednesday, #thursday, #friday").iCheck("enable"),$("#select_all_day, #monday, #tuesday, #wednesday, #thursday, #friday").iCheck("check")}}$(window).load(function(){$(".se-pre-con").fadeOut("slow")}),$(function(){optionDatePickerStart={autoclose:!0,format:"dd-mm-yyyy",weekStart:1,todayHighlight:!0},optionDatePickerEnd={autoclose:!0,format:"dd-mm-yyyy",weekStart:1,todayHighlight:!0,startDate:startDateDefault},$("#datetimepicker-start-date").datepicker(optionDatePickerStart).on("changeDate",function(e){startDate=new Date(e.date.valueOf()),startDate.setDate(startDate.getDate(new Date(e.date.valueOf()))),startDate=$("#datetimepicker-start-date").datepicker("getDate"),endDate=$("#datetimepicker-end-date").datepicker("getDate"),null!==startDate&&null!==endDate&&(startDate_ms=startDate.getTime(),endDate_ms=endDate.getTime(),startDate_ms>endDate_ms&&$("#datetimepicker-end-date").datepicker("update",startDate)),$("#datetimepicker-end-date").datepicker("setStartDate",startDate),hideDaysOfWeek(),$("#start_date-error").hide(),$("#register_exist_error").hide(),startDate=$("#datetimepicker-start-date").datepicker("getDate"),endDate=$("#datetimepicker-end-date").datepicker("getDate"),showCheckDayApply(startDate,endDate)}).on("clearDate",function(){$("#datetimepicker-end-date").datepicker("setStartDate",""),$("#register_exist_error").hide(),hideDaysOfWeek(),checkSubmit=$("#check_submit").val(),1==checkSubmit&&$("#start_date-error").show()}),$("#datetimepicker-end-date").datepicker(optionDatePickerEnd).on("changeDate",function(e){startDate=$("#datetimepicker-start-date").datepicker("getDate"),endDate=$("#datetimepicker-end-date").datepicker("getDate"),$("#end_date-error").hide(),$("#register_exist_error").hide(),showCheckDayApply(startDate,endDate)}).on("clearDate",function(){hideDaysOfWeek(),$("#register_exist_error").hide(),checkSubmit=$("#check_submit").val(),1==checkSubmit&&$("#end_date-error").show()}),$("#select_all_day input").on("ifClicked",function(e){checked=e.target.checked,checked?$("#monday, #tuesday, #wednesday, #thursday, #friday").iCheck("uncheck"):$("#monday, #tuesday, #wednesday, #thursday, #friday").iCheck("check")}),$("#monday input").on("ifChanged",function(e){checked=e.target.checked,checked?(count_checkbox_show=countCheckboxShow(),count_checkbox_checked=countCheckboxChecked(),count_checkbox_show==count_checkbox_checked&&$("#select_all_day").iCheck("check")):$("#select_all_day").iCheck("uncheck")}),$("#tuesday input").on("ifChanged",function(e){checked=e.target.checked,checked?(count_checkbox_show=countCheckboxShow(),count_checkbox_checked=countCheckboxChecked(),count_checkbox_show==count_checkbox_checked&&$("#select_all_day").iCheck("check")):$("#select_all_day").iCheck("uncheck")}),$("#wednesday input").on("ifChanged",function(e){checked=e.target.checked,checked?(count_checkbox_show=countCheckboxShow(),count_checkbox_checked=countCheckboxChecked(),count_checkbox_show==count_checkbox_checked&&$("#select_all_day").iCheck("check")):$("#select_all_day").iCheck("uncheck")}),$("#thursday input").on("ifChanged",function(e){checked=e.target.checked,checked?(count_checkbox_show=countCheckboxShow(),count_checkbox_checked=countCheckboxChecked(),count_checkbox_show==count_checkbox_checked&&$("#select_all_day").iCheck("check")):$("#select_all_day").iCheck("uncheck")}),$("#friday input").on("ifChanged",function(e){checked=e.target.checked,checked?(count_checkbox_show=countCheckboxShow(),count_checkbox_checked=countCheckboxChecked(),count_checkbox_show==count_checkbox_checked&&$("#select_all_day").iCheck("check")):$("#select_all_day").iCheck("uncheck")}),$("#managetime-icon-date-start").on("click",function(){$(".managetime-select-2").select2("close"),$("#related_persons").select2("close"),$("#datetimepicker-start-date").data("DateTimePicker").show()}),$("#managetime-icon-date-end").on("click",function(){$("#related_persons").select2("close"),$(".managetime-select-2").select2("close"),$("#datetimepicker-start-end").data("DateTimePicker").show()}),$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_minimal-blue"}),$("#approver").select2().on("select2:select",function(e){$("#approver-error").hide()}),$("#related_persons").select2({ajax:{url:urlSearchRelatedPerson,dataType:"JSON",data:function(e){return{q:$.trim(e.term)}},processResults:function(e){return{results:e}},cache:!0}}),$(".manage-time").keyup(function(){checkSubmit=$("#check_submit").val(),1==checkSubmit&&(lateStartShift=$("#late_start_shift").val().trim(),earlyMidShift=$("#early_mid_shift").val().trim(),lateMidShift=$("#late_mid_shift").val().trim(),earlyEndShift=$("#early_end_shift").val().trim(),""==lateStartShift&&""==earlyMidShift&&""==lateMidShift&&""==earlyEndShift?$("#error-time").show():$("#error-time").hide())}),$("#reason").keyup(function(){var e=$("#check_submit").val();if(1==e){var t=$("#reason").val().trim();""==t?$("#reason-error").show():$("#reason-error").hide()}}),$("#button_approve").click(function(){$("#register_id_approve").val($(this).val())}),$("#button_disapprove").click(function(){$("#reason_disapprove-error").hide(),$("#reason_disapprove").val(""),$("#register_id_disapprove").val($(this).val())}),$("#button_approve_submit").click(function(){var e=$("#register_id_approve").val(),personList=$(".select-search-employee").val(),t=window.location.href.substr(window.location.href),a=$(this);a.button("loading"),$.ajax({type:"GET",url:urlApprove,data:{registerId:e,urlCurrent:t,personList:personList},success:function(e){$("#modal_approve").modal("hide");var t=JSON.parse(e);window.location=t.url}})}),$("#button_disapprove_submit").click(function(){var e=$("#register_id_disapprove").val(),personList=$(".select-search-employee").val(),t=window.location.href.substr(window.location.href),a=$("#reason_disapprove").val();if(""==a.trim())return void $("#reason_disapprove-error").show();var c=$(this);c.button("loading"),$.ajax({type:"GET",url:urlDisapprove,data:{registerId:e,urlCurrent:t,reasonDisapprove:a,personList:personList},success:function(e){$("#modal_disapprove").modal("hide");var t=JSON.parse(e);window.location=t.url}})}),$("#reason_disapprove").keyup(function(){var e=$("#reason_disapprove").val();""==e.trim()?$("#reason_disapprove-error").show():$("#reason_disapprove-error").hide()})});