$(function(){$(document).on("change",".search-change",function(e){e.stopPropagation(),$(".btn-search-filter").trigger("click")}),$(".pagination").on("click",".page-link",function(e){e.preventDefault();var a=$(this).attr("href");dataSubmit={},dataSubmit.page=a,dataSubmit={filter_pager:dataSubmit,current_url:currentUrl},console.log(dataSubmit),$.ajax({url:urlPage,type:"GET",data:dataSubmit,dataType:"json",success:function(e){window.location.reload()}})})}),$(function(){$("body").on("click","#btn-showmodal",function(){$("#modalGrateful .error").html(""),$("#modalGrateful .modal-date").removeClass("hidden"),$("#modalGrateful .modal-title").html("Tri ân những nhân viên đã chọn"),$("#modalGrateful .submit-grateful-remove").addClass("submit-grateful"),$("#modalGrateful .submit-grateful").removeClass("submit-grateful-remove"),$("#show-modalGrateful").click()}),$("body").on("click","#btn-showmodal-remove",function(){$("#modalGrateful .error").html(""),$("#modalGrateful .modal-date").addClass("hidden"),$("#modalGrateful .modal-title").html("Bỏ tri ân những nhân viên đã chọn"),$("#modalGrateful .submit-grateful").addClass("submit-grateful-remove"),$("#modalGrateful .submit-grateful-remove").removeClass("submit-grateful"),$("#show-modalGrateful").click()}),$("#modalGrateful").on("click",".submit-grateful",function(e){var a=this;$(this).addClass("disabled"),$(this).find(".fa-refresh").removeClass("hidden");var t=$('input[name="grateful_date"]').val(),r=$('textarea[name="grateful_note"]').val(),l=getCheckItem(sessionKeys),o=!0;$("#modalGrateful .error").html(""),l.length||(o=!1,$("#modalGrateful .error").html("Bạn chưa chọn nhân viên")),o?$.ajax({url:gratefulStore,type:"POST",dataType:"json",data:{_token:_token,date:t,note:r,arrItem:l},success:function(e){return e.status?(l.forEach(function(e,a){$('tr[data-tr-row="'+e+'"]').addClass("bg_gratefuled")}),$(a).find(".fa-refresh").addClass("hidden"),$(a).removeClass("disabled"),$("#show-modalGrateful").click(),$("#show-modalMessage").click(),$('textarea[name="grateful_note"]').val(""),void removeCheckItem(sessionKeys)):void $("#modalGrateful .error").html(e.message)},error:function(e){$("#modalGrateful .error").html("Hệ thống có lỗi. Xin vui lòng thử lại sau!"),$(a).find(".fa-refresh").addClass("hidden"),$(a).removeClass("disabled")}}):($(a).find(".fa-refresh").addClass("hidden"),$(a).removeClass("disabled"))}),$("#modalGrateful").on("click",".submit-grateful-remove",function(e){var a=this;$(this).addClass("disabled"),$(this).find(".fa-refresh").removeClass("hidden");var t=$('textarea[name="grateful_note"]').val(),r=getCheckItem(sessionKeys),l=!0;$("#modalGrateful .error").html(""),r.length||(l=!1,$("#modalGrateful .error").html("Bạn chưa chọn nhân viên")),""==t&&(l=!1,$("#modalGrateful .error").html("Nêu lý do bỏ nhân viên đã tri ân")),l?$.ajax({url:gratefulRemove,type:"POST",dataType:"json",data:{_token:_token,note:t,arrItem:r},success:function(e){return e.status?(r.forEach(function(e,a){$('tr[data-tr-row="'+e+'"]').removeClass("bg_gratefuled")}),$(a).find(".fa-refresh").addClass("hidden"),$(a).removeClass("disabled"),$("#show-modalGrateful").click(),$("#show-modalMessage").click(),$('textarea[name="grateful_note"]').val(""),void removeCheckItem(sessionKeys)):void $("#modalGrateful .error").html(e.message)},error:function(e){$("#modalGrateful .error").html("Hệ thống có lỗi. Xin vui lòng thử lại sau!"),$(a).find(".fa-refresh").addClass("hidden"),$(a).removeClass("disabled")}}):($(a).find(".fa-refresh").addClass("hidden"),$(a).removeClass("disabled"))})});