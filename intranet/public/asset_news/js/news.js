function getYoutubeId(){var t=regexGetYoutubeId($('input[name="post[youtube_link]"]').val());$("#js-youtube-id").val(t)}function noThumb(t){var e='<img src="https://i.ytimg.com/vi/ID/maxresdefault.jpg">',i='<div class="play"></div>';return e.replace("ID",t)+i}function noIframe(){var t=document.createElement("iframe"),e="https://www.youtube.com/embed/ID?autoplay=1&modestbranding=1&iv_load_policy=3&rel=0&showinfo=0";t.setAttribute("src",e.replace("ID",this.dataset.id)),t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","1"),t.setAttribute("allow","autoplay; encrypted-media"),this.parentNode.replaceChild(t,this)}function regexGetYoutubeId(t){if(t){var e=/^.*(youtu.be\/|v\/|embed\/|watch\?|youtube.com\/user\/[^#]*#([^\/]*?\/)*)\??v?=?([^#\&\?]*).*/i,i=t.match(e);if(i&&void 0!==i[3])return i[3]}return t}function setNewIconPos(){$(".thumbnail").each(function(){var t=$(this),e=t.find("img.portrait"),i=t.find("img.new-icon");i.css({left:t.width()-17-(t.width()-e.width())/2,right:"unset"})})}function guid(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function ChangeToSlug(){var t,e;t=document.getElementById("title").value,e=t.toLowerCase(),e=e.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a"),e=e.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e"),e=e.replace(/i|í|ì|ỉ|ĩ|ị/gi,"i"),e=e.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o"),e=e.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u"),e=e.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y"),e=e.replace(/đ/gi,"d"),e=e.replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,""),e=e.replace(/ /gi,"-"),e=e.replace(/\-\-\-\-\-/gi,"-"),e=e.replace(/\-\-\-\-/gi,"-"),e=e.replace(/\-\-\-/gi,"-"),e=e.replace(/\-\-/gi,"-"),e="@"+e+"@",e=e.replace(/\@\-|\-\@|\@/gi,""),document.getElementById("slug").value=e}$("#btn-preview").click(function(t){t.preventDefault();var e=$("#form-post-edit"),i=e.find('input[name="post[title]"]').val().trim(),a=$(".post-detail");a.find(".preview-title").text(i);var o=a.find(".preview-content");if(0===+$("#is_video").val()){var s=CKEDITOR.instances.description.getData();o.html(s)}else if(2===+$("#is_video").val()){var n='<div class="center"><audio src="" controls="controls"></audio></div>';o.html(n)}else{o.addClass("youtube-player"),div=document.createElement("div");var l=$("#js-youtube-id").val();div.setAttribute("data-id",l),div.innerHTML=noThumb(l),div.onclick=noIframe,o.html(""),o.append(div)}$(".post-detail").removeClass("hidden"),$("#form-post-edit").addClass("hidden")}),$(".btn-back").click(function(){$(".preview-title").removeClass("youtube-player"),$(".post-detail").addClass("hidden"),$("#form-post-edit").removeClass("hidden")}),$("#btn-render").click(function(t){t.preventDefault();var e=guid();$("#render").val(e),$("#render-link").val($("#link-render").val()+"/"+e)}),$("#btn-remove-render").click(function(t){t.preventDefault(),$("#render").val(""),$("#render-link").val("")}),$(window).resize(function(){$(window).width()>=768&&$(window).width()<=991?$(".post-author span").each(function(){$(this).text("- "+$(this).attr("real-auth")+" -")}):1024==$(window).width()||320==$(window).width()||375==$(window).width()?(375==$(window).width()?$(".post-author span").each(function(){$(this).text("- "+$(this).attr("short-auth-375")+" -")}):$(".post-author span").each(function(){$(this).text("- "+$(this).attr("short-auth-1024")+" -")}),$(".post-author").each(function(){$(this).removeClass("col-xs-8"),$(this).addClass("col-xs-7")}),$(".post-read-more").each(function(){$(this).removeClass("col-xs-4"),$(this).addClass("col-xs-5")})):($(".post-author span").each(function(){$(this).text("- "+$(this).attr("short-auth")+" -")}),$(".post-author").each(function(){$(this).removeClass("col-xs-7"),$(this).addClass("col-xs-8")}),$(".post-read-more").each(function(){$(this).removeClass("col-xs-5"),$(this).addClass("col-xs-4")}))}).resize(),$(".btn-publish-news").on("click",function(){$("#modal-publish-news").modal("show")}),$(".btn-publish-ok").on("click",function(){$("#modal-publish-news").modal("hide"),CKEDITOR.instances.description.updateElement();var t=$("#form-post-edit").serialize();$.ajax({method:"POST",url:urlPublishNews,data:t,dataType:"JSON",success:function(t){bootbox.alert({message:t.message,backdrop:!0,className:"modal-default"}),$(".btn-publish-news").text("Published").prop("disabled",!0)},error:function(){bootbox.alert({message:"Error system",backdrop:!0,className:"modal-default"})}})}),$(".btn-publish-recruitment").on("click",function(){$("#modal-publish-news").modal("hide"),CKEDITOR.instances.description.updateElement();var t=$("#form-post-edit").serialize();$.ajax({method:"POST",url:urlPublishNewsRecruitment,data:t,dataType:"JSON",success:function(t){bootbox.alert({message:t.message,backdrop:!0,className:"modal-default"})},error:function(){bootbox.alert({message:"Error system",backdrop:!0,className:"modal-default"})}})}),function(t){var e="object"==typeof varGlobPass?varGlobPass:{},i={css:{like:"thumb-like",dislike:"thumb-dislike"},init:function(){var e=this;t('[data-post-btn="like"]').click(function(i){e.like(t(this))}),t("[data-count-like]").click(function(i){i.preventDefault(),e.showLike(t(this),"like")}),t("[data-count-like_cmt]").click(function(i){i.preventDefault(),e.showLike(t(this),"like_cmt")}),e.initDom(),e.getAllCount(),e.sameHeightPost()},getAllCount:function(){var i=this,a=[];return t("[data-post-id]").each(function(e,i){var o=t(i).data("post-id");a.indexOf(o)===-1&&a.push(o)}),!a.length||(a=a.join("-"),void t.ajax({type:"get",url:e.urlGetAllCount,data:{ids:a},success:function(t){return!t.status||(i.showCount(t),void(t.like&&i.showActiveLike(t.like)))}}))},like:function(i){var a=this;if(i.data("process"))return!0;var o=i.data("item-id");return!o||(i.prop("disabled",!0),i.data("process",1),void t.ajax({type:"POST",url:e.urlActionLike,data:{post_id:o,type:i.data("like-type"),_token:siteConfigGlobal.token},success:function(t){return!t.status||(a.showCount(t),t.like&&a.showActiveLike(t.like,"like"),void(t.like_cmt&&a.showActiveLike(t.like_cmt,"like_cmt")))},complete:function(){i.prop("disabled",!1),i.data("process",0)}}))},showCount:function(i){var a=this;t.each(i,function(e,i){return"object"!=typeof i||void t.each(i,function(i,o){var s,n;s="object"==typeof o?o.count:o,s>0?t("[data-count-"+e+"]").closest('[data-item-closest="'+i+'"]').removeClass("hidden"):t("[data-count-"+e+"]").closest('[data-item-closest="'+i+'"]').addClass("hidden"),n=a.minifyCount(s),t('[data-post-id="'+i+'"] [data-count-'+e+"]").text(n).data("count-org",s),t('[data-item-id="'+i+'"][data-count-'+e+"]").text(n).data("count-org",s)})}),t("[data-post-id]").removeClass("hidden"),i.cmt&&t("[data-post-cmt-load]").length&&t("[data-post-cmt-load]").each(function(a,o){var s=t(o).data("post-cmt-load");return!s||("object"!=typeof i.cmt[s]||"undefined"==typeof i.cmt[s].count||void(i.cmt[s].count>e.cmtPerpage&&t(o).removeClass("hidden")))})},showActiveLike:function(i,a){if("object"!=typeof i)return!0;var o=this;t.each(i,function(i,s){var n;n=t("like_cmt"===a?'[data-item-id="'+i+'"][data-post-icon="like_cmt"]':'[data-post-id="'+i+'"] [data-post-icon="like"]'),s.like?(n.addClass(o.css.like),n.removeClass(o.css.dislike),n.attr("title",e.trans.dislike)):(n.removeClass(o.css.like),n.addClass(o.css.dislike),n.attr("title",e.trans.like))})},minifyCount:function(t){return!t||isNaN(t)?"":(t=parseInt(t),t?t<1e3?t:t<1e6?Math.round(t/1e3*10)/10+"K":Math.round(t/1e6*10)/10+"M":"")},sameHeightPost:function(){RKfuncion.boxMatchHeight.init({parent:".bl-row",children:[".bci-header",".bci-image",".post-desc",".bc-item"],center:[".bci-image"]})},showLike:function(i,a){var o,s=this;return o="like_cmt"===a?i.data("item-id"):i.closest("[data-post-id]").data("post-id"),!(o&&!s.proShowLike)||(t('#showLike .modal-body [data-like-dom="list"]').html(""),t('#showLike .modal-body [data-like-dom="no-list"]').addClass("hidden"),s.proShowLike=1,t.ajax({url:e.urlListLike,data:{post_id:o,type:i.data("like-type")},success:function(e){if(!e.status)return!0;if(!e.data||!e.data.length)return t('#showLike .modal-body [data-like-dom="no-list"]').removeClass("hidden"),!0;var i="";t.each(e.data,function(t,e){t%2===0&&(i+='<div class="row">'),i+='<div class="col-md-6 show-like"><img src="'+e.avatar_url+'" class="avartar" /><span class="name">&nbsp;'+e.name+'</span><hr style="margin-top: 10px; margin-bottom: 10px;"></div>',t%2===1&&(i+="</div>")}),e.data.length%2===1&&(i+="</div>"),t('#showLike .modal-body [data-like-dom="list"]').html(i)},complete:function(){s.proShowLike=0}}),void t("#showLike").modal("show"))},initDom:function(){var e=this;e.htmlListLike=t('[data-like-dom="list"]').html()}};i.init()}(jQuery),$("#category_webvn").change(function(){$("#input_category_webvn").val($(this).val())}),function(t){t.fn.menumaker=function(e){var i=t(this),a=t.extend({format:"dropdown",sticky:!1},e);return this.each(function(){return t(this).find(".button").on("click",function(){t(this).toggleClass("menu-opened");var e=t(this).next("ul");e.hasClass("open")?e.slideToggle().removeClass("open"):(e.slideToggle().addClass("open"),"dropdown"===a.format&&e.find("ul").show())}),i.find("li ul").parent().addClass("has-sub"),multiTg=function(){i.find(".has-sub").prepend('<span class="submenu-button"></span>'),i.find(".submenu-button").on("click",function(){t(this).toggleClass("submenu-opened"),t(this).siblings("ul").hasClass("open")?t(this).siblings("ul").removeClass("open").slideToggle():t(this).siblings("ul").addClass("open").slideToggle()})},"multitoggle"===a.format?multiTg():i.addClass("dropdown"),a.sticky===!0&&i.css("position","fixed"),resizeFix=function(){var e=1e3;t(window).width()>e&&i.find("ul").show(),t(window).width()<=e&&i.find("ul").hide().removeClass("open")},resizeFix(),t(window).on("resize",resizeFix)})}}(jQuery),function(t){t(document).ready(function(){t("#cssmenu").menumaker({format:"multitoggle"})})}(jQuery),$(function(){function t(t,i){var a=$(window).width();if(a>768)for(var o=$(t).height();o>=i;)e(t),o=$(t).height()}function e(t){for(var e=$(t).text().split(" "),i="",a=e.length-2,o=0;o<a;o++)i+=" "+e[o];i=$.trim(i)+" ...",$(t).text(i)}$.each($(".cut_desc_news"),function(e,i){t(this,68)}),$.each($(".cut_title_news"),function(e,i){t(this,55)}),$.each($(".cut_top_title_news"),function(e,i){t(this,45)})});