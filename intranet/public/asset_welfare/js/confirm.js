function checkFormSubmit(){var e=0;if($("#is_card_id").is(":checked")){var a=$(".input-relative_card_id").find("#card_id").val();0==a.trim().length&&($(".input-relative_card_id").find("#custom-error-card-id").removeClass("hidden"),$(".input-relative_card_id").find("#custom-error-card-id").show(),e++)}return $("#form-add-wel-empl-relatives").valid()||e++,0==e}function setSelectRelation(e,a){var t=$(".fee_favorable_attached").data("url");$(".relation_name_id").select2({ajax:{url:t+"/"+e+"/"+a,dataType:"json",delay:250,processResults:function(e){return{results:$.map(e,function(e){return{text:e.name,id:e.id}})}},cache:!0}})}$(document).ready(function(){var e={autoclose:!0,format:"yyyy-mm-dd",weekStart:1,todayHighlight:!0};$("#birthday").datepicker(e);var a=$("input[name=_token]").val();$("div.alert").delay(1e4).slideUp(),$(document).on("change","#is_register_relatives",function(){this.checked?$(".panel-default").removeClass("disabledbutton hidden"):$(".panel-default").addClass("disabledbutton hidden")}),$(document).on("click",".confirm .btn-open-modal-add",function(){$("#form-add-wel-empl-relatives").trigger("reset"),$("#modal-add-relatives").modal("show")}),$("#form-add-wel-empl-relatives").on("submit",function(e){if(!$(this).valid())return!1;e.preventDefault();var t=$("#form-add-wel-empl-relatives").attr("action"),i=new FormData($("#form-add-wel-empl-relatives")[0]);i.append("_token",a),$.ajax({type:"POST",url:t,processData:!1,cache:!1,contentType:!1,data:i,success:function(e){"fail"==e.status?$("#favorable-require-max").show():"raletion"==e.status&&($("#modal-add-relatives").modal("hide"),$(".confirm-participation-welfare .confirm .table-responsive ").load(location.href+" .confirm-participation-welfare .confirm .table-responsive >*","")),$(".btn-add-wel-empl-relatives").removeAttr("disabled")}})}),$(document).on("click",".table-responsive .edit-relative-attach",function(){var e=$(this).data("url"),a=$(this).data("id");$.ajax({type:"GET",url:e,data:{key:a},success:function(e){for(var a in e)$("#modal-add-relatives #"+a).val(e[a]);setSelectRelation(e.welfare_id,e.support_cost),$(".relation_name_id").append('<option value="'+e.relation_name_id+'" selected="selected">'+e.relation_name+"</option>").trigger("change"),""==e.card_id?($("#modal-add-relatives").find("#not_card_id").prop("checked",!0),$("#modal-add-relatives").find(".label-card-id").html(t.replace("<em>*</em>","")),$(".input-relative_card_id").addClass("hidden")):$("#modal-add-relatives").find("#is_card_id").prop("checked",!0),$("#modal-add-relatives").modal("show")}})}),$(document).on("click",".delete-relative-attach",function(){$(".form-confirm-delete").attr("action",$(this).data("url")),$(".form-confirm-delete").find("input[name=welid]").val($(this).data("id")),$(".form-confirm-delete").find(".deleteContent").html($(this).data("noti")),$("#modal-delete-relative-attach").removeClass("modal-warning"),$("#modal-delete-relative-attach").addClass("modal-danger"),$("#modal-delete-relative-attach").modal("show")}),$(document).on("click","#modal-delete-relative-attach .btn-ok",function(){var e=$(".form-confirm-delete").attr("action"),t=$("#modal-delete-relative-attach #id").val(),i=$("#modal-delete-relative-attach input[name=submit_destroy]").val();$.ajax({type:"POST",url:e,data:{_token:a,welid:t,submit_destroy:i},success:function(e){$("#modal-delete-relative-attach").modal("hide"),$(".flash-message").hide(),"confirm"===e.status&&(window.scrollTo(0,0),$(".error-message li").text(e.messages),$(".error-message").removeClass("hidden"),$(".confirm-participation-welfare").load(location.href+" .confirm-participation-welfare>*","")),"ok"===e.status&&$(".confirm-participation-welfare .confirm .table-responsive ").load(location.href+" .confirm-participation-welfare .confirm .table-responsive >*","")}})}),$(document).on("click",".submit-destroy",function(){$(".form-confirm-delete").attr("action",$("#confirm-participation").attr("action")),$(".form-confirm-delete").find("input[name=welid]").val($("#confirm-participation input[name=welid]").val()),$(".form-confirm-delete").find("input[name=submit_destroy]").val("destroy"),$(".form-confirm-delete").find(".deleteContent").html($(this).data("noti")),$("#modal-delete-relative-attach").removeClass("modal-danger"),$("#modal-delete-relative-attach").addClass("modal-warning"),$("#modal-delete-relative-attach").modal("show")});var t=$(".label-card-id").html();$("#modal-add-relatives").on("hidden.bs.modal",function(){$("#form-add-wel-empl-relatives").trigger("reset"),$(this).find("#is_card_id").prop("checked",!0),$(this).find(".label-card-id").html(t),$(this).find(".relation_name_id").hasClass("select2-hidden-accessible")&&$(this).find(".relation_name_id").select2("destroy"),$(this).find("p.error").hide(),$(this).find("#key").val(""),$(".input-relative_card_id").removeClass("hidden"),$(this).find("label.error").css("display","none"),$(".btn-add-wel-empl-relatives").prop("disabled",!1)}),$(document).on("change","input[name=is_card_id]",function(){var e=$(".label-card-id").html();if($("#is_card_id").is(":checked")){var a=e+"<em>*</em>";$(".label-card-id").html(a),$(".input-relative_card_id").removeClass("hidden")}if($("#not_card_id").is(":checked")){var a=e.replace("<em>*</em>","");$(".label-card-id").html(a),$(".input-relative_card_id").find("#card_id").val(""),$(".input-relative_card_id").addClass("hidden")}}),$(".relation_name_id").select2(),$(document).on("change",".fee_favorable_attached",function(){var e=$('input[name="welid"]').val(),a=$(this).val();$("p.error").hide(),setSelectRelation(e,a)})});