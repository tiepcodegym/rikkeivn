!function(e){function t(t){var n=t.val(),a=t.attr("id");0==parseInt(n)||""==n||null==n?(e("#"+a+"-error").show().html(messageError),t.parent().find("label.error").show()):e("#"+a+"-error").hide().html("")}e("input, select").attr("readonly")&&e(this).css("pointer-events","none"),e.fn.selectSearchAjax=function(t){var n={url:"",pages:1,delay:200,multiple:!1,allowClear:!1,allowHtml:!1,closeOnSelect:!0,tags:!1,minimumInputLength:2,initSelection:function(e,t){var n="",a="",l=[];l.push({id:n,text:a}),t(l)}},a=e.extend({},n,t),l=this;l.init=function(t){e(t).select2({multiple:a.multiple,closeOnSelect:a.closeOnSelect,allowClear:a.allowClear,allowHtml:a.allowHtml,tags:a.tags,minimumInputLength:a.minimumInputLength,ajax:{url:a.url,dataType:"json",delay:a.delay,data:function(e){return{q:e.term,page:e.page,employeeBranch:"{{ isset($employeeBranch['branch']) && !empty($employeeBranch['branch']) ? $employeeBranch['branch'] : '' }}"}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:10*t.page<e.total_count}}},cache:!0},escapeMarkup:function(e){return e},placeholder:a.placeholder,templateResult:l.formatRepo,templateSelection:l.formatRepoSelection,initSelection:a.initSelection})},l.formatRepo=function(e){return e.loading?e.text:markup=e.text},l.formatRepoSelection=function(e){return e.text},l.on("select2:select",function(t){sessionStorage.clear();var n=e("#assign_id").val(),a=e("#assign_id option:selected").text();null!=a&&sessionStorage.setItem("assign_id_"+n,a)});var o=e(this);return e.each(o,function(e,t){l.init(t)})},e(".select-search-course").selectSearchAjax({url:e(".select-search-course").data("remote-url")}),e(".select-search-person").selectSearchAjax({url:e(".select-search-person").data("remote-url"),initSelection:function(t,n){var a=assignId,l="";"undefined"!=typeof Storage?null!==sessionStorage.getItem("assign_id_"+a)&&(l=sessionStorage.getItem("assign_id_"+a),e('select[name="assign_id"]').append("<option value='"+a+"' selected>"+l+"</option>")):console.log("Trình duyệt của bạn không hỗ trợ!");var o=[];o.push({id:a,text:l}),n(o)}});var n=function(t,n){var a="";t.length<=n&&(t.each(function(t){a+=0==t?e(this).text().trim():", "+e(this).text().trim()}),setTimeout(function(){a.length&&(e("#select-team .btn-group .multiselect").attr("title",a),e("#select-team .btn-group .multiselect-selected-text").html(a))},10))},a=e("#select-team select option:selected");n(a,2),e("#select-team select").multiselect({nonSelectedText:"--------------",numberDisplayed:2}),e("#education_object .education_object").multiselect(),e(function(){e(".select-search-employee").selectSearchEmployee(),e(".select-search-employee-no-pagination").selectSearchEmployeeNoPagination()}),onload=function(){var t=document.getElementById("refreshed");"no"==t.value?t.value="yes":(t.value="no",e(".btn-create").prop("disabled",!0),location.reload())},e("#team_id, #tag_id, #type_id, #object_id, #description, #title, #status").on("change",function(){t(e(this))}),e('input[type="text"]').on("change",function(){this.value=e.trim(this.value)});var l=function(){var t=e("#status").val();t==statusPending||t==statusReject?e("#reason-form").show():e("#reason-form").hide()};l(),e("#status").on("change",function(){l()}),e(".education-tag").select2({tags:!0,tokenSeparators:["/",",",";"]}),e(".start-date").datetimepicker({minDate:(new Date).setHours(0,0,0,0),useCurrent:!0,format:"DD-MM-YYYY"})}(jQuery);