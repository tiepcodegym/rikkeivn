!function(e){e.fn.select2tagAjax=function(t){var n={url:"",pages:1,delay:300,placeholder:"",multiple:!0,closeOnSelect:!1,tags:!1},a=e.extend({},n,t),l=this;l.init=function(t){var t=t;e(t).select2({multiple:a.multiple,closeOnSelect:a.closeOnSelect,allowClear:a.allowClear,allowHtml:a.allowHtml,tags:a.tags,theme:a.theme,ajax:{url:a.url,dataType:"json",delay:a.delay,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:5*t.page<e.total_count}}},cache:!0},escapeMarkup:function(e){return e},placeholder:a.placeholder,templateResult:l.formatRepo,templateSelection:l.formatRepoSelection}),l.countItemTag(t)},l.formatRepo=function(e){return e.loading?e.text:markup=e.text},l.formatRepoSelection=function(e){return e.text},l.countItemTag=function(t){var n=e(t).val()?e(t).val().length:0,a=e(t).parent(),l=a.find(".select2-selection__rendered");a.find(".select2-selection__counter").remove(),n>2?(l.hide(),l.find("li:not(.select2-search--inline)").hide(),l.after('<div class="select2-selection__counter">'+n+" selected</div>"),a.find(".select2-selection__counter").show()):(l.show(),a.find(".select2-selection__counter").hide())},l.on("select2:unselecting",function(t){var n=t.params.args.data.id;e(t.params.args.originalEvent.currentTarget).hasClass("select2-results__option")&&(e(t.params.args.originalEvent.currentTarget).attr("aria-selected","false"),e(".select2-tag option[value='"+n+"']").remove()),l.countItemTag(e(this))}),l.on("select2:close",function(t){e(".btn-search-filter").trigger("click")}),l.on("change",function(t){l.val().length>0&&l.countItemTag(e(this))});var i=e(this);return e.each(i,function(e,t){l.init(t)})},e.fn.selectSearchAjax=function(t){var n={url:"",pages:1,delay:300,multiple:!1,allowClear:!0,allowHtml:!0,tags:!1,minimumInputLength:2,maximumSelectionLength:1,initSelection:function(e,t){var n="",a="",l=[];l.push({id:n,text:a}),t(l)}},a=e.extend({},n,t),l=this;l.init=function(t){e(t).select2({multiple:a.multiple,closeOnSelect:a.closeOnSelect,allowClear:a.allowClear,allowHtml:a.allowHtml,tags:a.tags,minimumInputLength:a.minimumInputLength,maximumSelectionLength:a.minimumInputLength,ajax:{url:a.url,dataType:"json",delay:a.delay,data:function(e){return{q:e.term,employee_branch:"{{ $employee_branch['branch'] }}",page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:10*t.page<e.total_count}}},cache:!0},escapeMarkup:function(e){return e},placeholder:a.placeholder,templateResult:l.formatRepo,templateSelection:l.formatRepoSelection,initSelection:a.initSelection})},l.formatRepo=function(e){return e.loading?e.text:markup=e.text},l.formatRepoSelection=function(e){return e.text},l.on("select2:select",function(t){e(".btn-search-filter").trigger("click")});var i=e(this);return e.each(i,function(e,t){l.init(t)})},e(".select2-tag").select2tagAjax({url:e(".select2-tag").data("remote-url"),theme:"select2-tag-custom"}),e(".select-search-person").selectSearchAjax({url:e(".select-search-person").data("remote-url"),minimumInputLength:1,initSelection:function(t,n){var a=filterAssigned,l=e(".employee-assigned-"+a),i=l.data("assigned-name"),c=[];a.length>0&&e('select[name="filter[search][assign_id]"]').append("<option value='"+a+"' selected>"+i+"</option>"),c.push({id:a,text:i}),n(c)}}),e(".select-search-title").selectSearchAjax({url:e(".select-search-title").data("remote-url"),initSelection:function(e,t){var n=filtertitle,a=filtertitle,l=[];l.push({id:n,text:a}),t(l)}}),e(".from_date, .to_date").datetimepicker({useCurrent:!0,format:"DD-MM-YYYY"}),e(".from_date").on("dp.change",function(t){var n=moment(new Date(t.date));n.add(1,"days"),e(".to_date").data("DateTimePicker").minDate(n),e(this).data("DateTimePicker").hide()}),e(".to_date").datetimepicker().on("dp.change",function(t){var n=moment(new Date(t.date));n.subtract(1,"days"),e(".from_date").data("DateTimePicker").maxDate(n)}),e(".select-multi").multiselect({nonSelectedText:"--------------",numberDisplayed:2,onDropdownHide:function(e){RKfuncion.filterGrid.filterRequest(this.$select)}}),e("#select-team select").multiselect({nonSelectedText:"--------------",numberDisplayed:1}),e(".scope .multiselect-selected-text").html(function(t,n){e(".scope .multiselect-selected-text").html(n.replace(/&nbsp;/g,"")),e(".scope .multiselect dropdown-toggle").attr("title",n.replace(/&nbsp;/g,""))})}(jQuery);var removeSpace=function(e,t){var n="";e.length<=t&&(e.each(function(e){n+=0==e?$(this).text().trim():", "+$(this).text().trim()}),setTimeout(function(){n.length&&($("#select-team .btn-group .multiselect").attr("title",n),$("#select-team .btn-group .multiselect-selected-text").html(n))},10))};$("#export_list").click(function(e){e.preventDefault();var t=document.createElement("form");t.setAttribute("method","post"),t.setAttribute("action",$(this).data("url"));var n={_token:siteConfigGlobalToken};for(var a in n){var l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name",a),l.setAttribute("value",n[a]),t.appendChild(l)}document.body.appendChild(t),t.submit(),t.remove()}),$(".filter-multi-select").on("keypress",function(e){13===e.keycode&&$(".btn-search-filter").trigger("click")});