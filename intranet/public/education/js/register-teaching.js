function setErrorInput(){var e=$("#tblOperationBody tbody"),t=$("#title").val(),a=$("#content").val(),n=$(".target").val();""==$.trim(t)&&($(".dv-title").find(".error").remove(),$("#title").val(""),$("#title").after('<label id="title-error" class="error" for="title">'+globalTitle+"</label>")),""==$.trim(a)&&($(".dv-content").find(".error").remove(),$("#content").val(""),$("#content").after('<label id="content-error" class="error" for="title">'+globalConent+"</label>")),""==$.trim(n)&&($(".tg-content").find(".error").remove(),$(".target").val(""),$(".target").after('<label id="tg-error" class="error" for="title">'+globalConent+"</label>")),e.each(function(){$(this).find("input, select").each(function(){$(this).val()?$(this).removeClass("error-input"):($(".error-input-mess").html(globalMessage["Input all"]),$(".error-input-mess").addClass("error"),$(this).addClass("error-input"))}),$("#tblOperationBody").find(".error-input").length?$(".error-input-mess").show():$(".error-input-mess").hide()})}function formSubmit(){$("#form-create-update").submit()}function getCourseByCourseById(e){globalTotal=0,loadding(),$.ajax({url:"/manager/courses/type/"+e,type:"get",dataType:"json",success:function(e){e.data&&($("#course_id").empty(),$("#class_id").empty(),$("#course_id").append(renderHtmlOption(e.data.itemCourse,"")),$("#class_id").append(renderHtmlOption(e.data.itemsClass,"")),$("#register-type2").is(":checked")?$(".content").val(globalContent?globalContent:""):$(".content").val(e.data.contentCours.description),renderHtmlTime(e.data.classDetail))},error:function(e,t,a){"timeout"===t?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)},complete:function(){hiddenLoading(),$("#register-type2").is(":checked")?$(".content").prop("readonly",!1):$(".content").prop("readonly",!0)}})}function getClassesByCourseId(e){$("#class_id").addClass("hidden"),$(".detail-class").addClass("hidden"),$("#update_class_loading").removeClass("hidden"),$("#update_detail_loading").removeClass("hidden"),$.ajax({url:"/manager/classes/"+e,type:"get",dataType:"json",success:function(e){e.data&&($("#class_id").empty(),$("#class_id").append(renderHtmlOption(e.data.itemsClass,"")),renderHtmlTime(e.data.classDetail),$(".content").val(e.data.contentCours.description))},error:function(e,t,a){"timeout"===t?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)},complete:function(){$("#update_class_loading").addClass("hidden"),$("#update_detail_loading").addClass("hidden"),$("#class_id").removeClass("hidden"),$(".detail-class").removeClass("hidden"),$("#register-type2").is(":checked")?$(".content").val("").prop("readonly",!1):$(".content").prop("readonly",!0)}})}function getCourse(e){$.ajax({url:"/manager/courses/"+e,type:"get",dataType:"json",success:function(e){e.data&&($("#register-type2").is(":checked")?$(".content").val(globalContent?globalContent:"").prop("readonly",!1):$(".content").val(e.data.description).prop("readonly",!0))},error:function(e,t,a){"timeout"===t?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)}})}function getClassDetailById(e){$("#update_detail_loading").removeClass("hidden"),$(".detail-class").addClass("hidden"),globalTotal=0,$.ajax({url:"/manager/class_detail/"+e,type:"get",dataType:"json",success:function(e){renderHtmlTime(e.data)},error:function(e,t,a){"timeout"===t?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)},complete:function(){$("#update_detail_loading").addClass("hidden"),$(".detail-class").removeClass("hidden")}})}function getRegisterTeachingDetails(e,t,a){globalTotal=0,loadding(),$.ajax({url:"/manager/register-teaching/detail/"+e+"/"+t+"/"+a,type:"get",dataType:"json",success:function(e){e.data&&($("#course_id").empty(),$("#class_id").empty(),$("#course_id").append(renderHtmlOption(e.data.itemCourse,t)),$("#class_id").append(renderHtmlOption(e.data.itemsClass,a)),$("#register-type2").is(":checked")?$(".content").val(globalContent?globalContent:"").prop("readonly",!1):$(".content").val(e.data.contentCours.description).prop("readonly",!0),renderHtmlTime(e.data.classDetail))},error:function(e,t,a){"timeout"===t?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)},complete:function(){hiddenLoading()}})}function renderHtmlTime(e){var t="";if(e.length>0){$(".detail-class").empty();for(var a=0;a<e.length;a++){var n=(Date.parse(e[a].end_date_time)-Date.parse(e[a].start_date_time))/1e3/3600;globalTotal+=n,t+='<input type="hidden" name="class_detai['+a+'][class_id]" value="'+e[a].class_id+'" />',t+='<input type="hidden" name="class_detai['+a+'][name]" value="'+e[a].name+'" />',t+='<input type="hidden" name="class_detai['+a+'][start_date]" value="'+e[a].start_date_time+'" />',t+='<input type="hidden" name="class_detai['+a+'][end_date]" value="'+e[a].end_date_time+'" />',t+="<p>"+globalCa+" "+e[a].name+" : "+moment(e[a].start_date_time).format("YYYY-MM-DD H:mm")+" - "+moment(e[a].end_date_time).format("YYYY-MM-DD H:mm")+"</p>"}$("#register-type1").is(":checked")&&($(".tranning_hour").val(globalTotal),$("#tranning_hour-error").addClass("hidden")),$(".detail-class").append(t)}else $(".detail-class").empty(),$(".tranning_hour").val("")}function hide(){var e=globalTotalTime?globalTotalTime:"";if($(".tranning_hour").val(e),$("#course").addClass("hidden"),$("#class").addClass("hidden"),$("#detail-class").addClass("hidden"),$(".lbl-required .required").removeClass("hidden"),$(".detail_class_choose").removeClass("hidden"),$(".tblDetailInput").empty(),varGlobalPassModule.dataRegisterTime.length>0){for(var t=0;t<varGlobalPassModule.dataRegisterTime.length;t++)$(".tblDetailInput").append(renderHtmlDeitalShift(t+1,varGlobalPassModule.dataRegisterTime[t])),globalIndex+=1;$(".content").val(globalContent)}else $(".tblDetailInput").append(renderHtmlDeitalShift(globalIndex,null));Datetimepicker()}function Datetimepicker(){$(".start_date").datetimepicker({allowInputToggle:!0,format:"YYYY-MM-DD H:mm",useCurrent:!1,sideBySide:!0}).on("dp.hide",function(e){var t=moment(e.date).format("YYYY-MM-DD H:mm"),a=moment(e.date).format("YYYY-MM-DD 23:59");$(this).val()&&($(this).parents("tr").find(".end_date").data("DateTimePicker").minDate(t),$(this).parents("tr").find(".end_date").data("DateTimePicker").maxDate(a)),totalTime()}).on("dp.show",function(){$(this).parents("tr").find(".start_date").data("DateTimePicker").minDate(globalDateToday)}),$(".end_date").datetimepicker({allowInputToggle:!0,format:"YYYY-MM-DD H:mm",useCurrent:!1,sideBySide:!0}).on("dp.hide",function(e){var t=moment(e.date).format("YYYY-MM-DD 00:00"),a=moment(e.date).format("YYYY-MM-DD H:mm"),n=$(this).parents("tr").find(".start_date").val();n||($(this).parents("tr").find(".start_date").data("DateTimePicker").maxDate(a),$(this).parents("tr").find(".start_date").data("DateTimePicker").minDate(t)),totalTime()}).on("dp.show",function(){$(this).parents("tr").find(".end_date").data("DateTimePicker").minDate(globalDateToday)})}function hiddenError(){$("#title-error").remove(),$("#content-error").remove(),$(".error-input-mess").hide(),$("#tg-error").remove(),$("#team-error").remove()}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}});var globalTotal,globalIndex=1,globalDateToday=new Date;$(document).ready(function(){hide()}),$(document).on("blur",".tblDetailInput input",function(){$(this).val()&&$(this).removeClass("error-input"),$("#tblOperationBody").find(".error-input").length?$(".error-input-mess").show():$(".error-input-mess").hide()}),$(document).on("blur","#title, #content",function(){var e=$(this).val();e&&$("#title-error").addClass("hidden")}),$(document).on("click",".add-new",function(){globalIndex++,$(".tblDetailInput").append(renderHtmlDeitalShift(globalIndex)),Datetimepicker()}),$(document).on("click",".btn-remove",function(){var e=$(this),t=e.closest("tr");$(".tranning_hour").val(""),t.remove(),totalTime(),0==$("#tblOperationBody tbody").find("tr").length&&$(".add-new").click()}),$(document).on("click",".submitBtn",function(){var e=$(this).attr("data-mode");setErrorInput(),"mode_update"===e?0==$("#tblOperationBody").find(".error-input").length&&""!=$("#title").val()&&""!=$("#content").val()&&formSubmit():0==$("#tblOperationBody").find(".error-input").length&&""!=$("#title").val()&&""!=$("#content").val()&&formSubmit()}),$(document).ready(function(){$("#team_id_add").multiselect({nonSelectedText:nonSelectedText,allSelectedText:allSelectedText,numberDisplayed:3}),$(".caret").addClass("hidden")});