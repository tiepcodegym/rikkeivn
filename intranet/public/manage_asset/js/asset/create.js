function initCheckbox(){$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_minimal-blue"})}function lastDayOfMonth(e,t){return new Date(new Date(e,t,1)-1)}$(document).ready(function(){$("#form_edit_asset_item").validate({rules:{"item[code]":{required:!0,rangelength:[1,100]},"item[name]":{required:!0,rangelength:[1,100]},"item[category_id]":{required:!0},"item[warehouse_id]":{required:!0},"item[serial]":{rangelength:[1,100]},"item[warranty_exp_date]":{afterPurchaseDate:!0},"item[address]":{required:!0},"item[warranty_priod]":{validNumber:!0,min:0}},messages:{"item[code]":{required:requiredText,rangelength:rangelengthText},"item[name]":{required:requiredText,rangelength:rangelengthText},"item[category_id]":{required:requiredText},"item[warehouse_id]":{required:requiredText},"item[serial]":{rangelength:rangelengthText},"item[address]":{required:requiredText},"item[warranty_priod]":{validNumber:requiredNumber,min:minNumber}},errorPlacement:function(e,t){var a=t.attr("name");"item[warehouse_id]"===a?e.insertAfter(t.next("span")):e.insertAfter(t)}}),$.validator.addMethod("afterPurchaseDate",function(e,t){var a=$("#purchase_date").val(),r=$("#warranty_exp_date").val();return!(""!==a&&""!==r&&new Date(r).getTime()<new Date(a).getTime())},"Vui lòng chọn bằng hoặc sau ngày mua"),$.validator.addMethod("validNumber",function(e,t){if(e.trim()){var a=/^\d+$/;return a.test(e.trim())}return!0},requiredNumber)}),$(function(){selectSearchReload(),$(".datetime-picker").datepicker({autoclose:!0,format:"dd-mm-yyyy",weekStart:1,todayHighlight:!0}),$("#purchase_datetime_picker").datepicker({autoclose:!0,format:"dd-mm-yyyy",weekStart:1,todayHighlight:!0}).on("changeDate",function(e){var t=new Date(e.date.valueOf()),a=t.getDate();t.setDate(a),28===a||29===a||30===a||31===a?warrantyDate=lastDayOfMonth(t.getFullYear(),t.getMonth()+1+parseInt($("#warranty_priod").val())):warrantyDate=t.setMonth(t.getMonth()+parseInt($("#warranty_priod").val())),warrantyDate=new Date(warrantyDate),$("#warranty_datetime_picker").datepicker("setDate",warrantyDate),$("#warranty_exp_date").prop("disabled",!0)}),$("#warranty_datetime_picker").datepicker({autoclose:!0,format:"dd-mm-yyyy",weekStart:1,todayHighlight:!0}),RKfuncion.select2.elementRemote($("#manager_id")),$("#warranty_priod").on("change",function(){var e=$("#purchase_datetime_picker").datepicker("getDate");if(e){var t=e.getDate();28===t||29===t||30===t||31===t?e=lastDayOfMonth(e.getFullYear(),e.getMonth()+1+parseInt($("#warranty_priod").val())):e.setMonth(e.getMonth()+parseInt($(this).val())),warrantyDate=new Date(e),$("#warranty_datetime_picker").datepicker("setDate",warrantyDate),$("#warranty_exp_date").prop("disabled",!0)}}),initCheckbox(),$(document).on("change","#category_id",function(e){$.ajax({url:urlAjaxGetAssetAttributes,type:"GET",data:{assetItemId:function(){return $("#asset_id").val()},assetCategoryId:function(){return $("#category_id").val()}},success:function(e){$("#asset_attributes_list").html(e.html),$("#asset_code").val(e.code),initCheckbox()}})})});