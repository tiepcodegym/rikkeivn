function reportProcessPdf(e,t,a){var o=[];e.forEach(function(e){o.push({stack:[{text:"Báo cáo biến động tài sản",style:"header"}]}),t&&a?o.push({text:"Từ ngày "+t+"Đến ngày "+a,style:"toDate",alignment:"center"}):(t&&o.push({text:"Từ ngày "+t,style:"toDate",alignment:"center"}),a&&o.push({text:" Đến ngày "+a,style:"toDate",alignment:"center"})),o.push({text:"Mã tài sản: "+e.asset_code,style:"headerEmp"}),o.push({text:"Tên tài sản: "+e.asset_name,style:"headerEmp"});var n={style:"tableAsset",width:"auto",table:{headerRows:1,widths:["auto",80,130,100,100,100,165],body:[]}};e.history.length>0?e.history.forEach(function(e,t){n.table.body.push([t+1,e.employee_code,e.employee_name,e.role_name,e.state_history,e.created_at,e.change_reason])}):n.table.body.push([{colSpan:7,text:"Không có dữ liệu",bold:!0}]),n.table.body.unshift(["STT","Mã nhân viên","Tên nhân viên","Chức vụ","Tình trạng","Ngày","Lý do"]),o.push(n),o.push({style:"footer",columns:[{},{},{stack:[{text:"Ngày...tháng...năm......",style:"fontItalics"},{text:"NGƯỜI LẬP BIỂU",bold:!0},{text:"(Ký, ghi rõ họ tên)",style:"fontItalics"}]}],pageBreak:"after"})}),o[o.length-1]&&delete o[o.length-1].pageBreak,pdfMake.createPdf({info:{title:"Báo cáo biến động tài sản"},content:o,styles:{headerEmp:{fontSize:13,bold:!0},tableAsset:{alignment:"center",margin:[0,10,0,0]},header:{fontSize:16,bold:!0,alignment:"center",margin:[0,40,0,0]},fontItalics:{italics:!0},footer:{margin:[0,20,0,0],alignment:"center"},toDate:{italics:!0,margin:[0,0,0,30]}},pageMargins:[50,30],pageOrientation:"landscape"}).open()}$(document).on("submit",".form-report-use-process",function(e){var t=$(this).find('input[name="report_type"]').val(),a=tableReport.column(0).checkboxes.selected(),o=!1,n="";return $.each(a,function(e,t){o=!0,n+=t+","}),o&&($("button[type=submit]").prop("disabled",!0),$.ajax({url:urlReport,method:"POST",data:{data:$(this).serialize()+"&assets="+n,_token:_token},dataType:"JSON",success:function(e){e.data?(reportProcessPdf(e.data,e.startDate,e.endDate),$("#modalReport-"+t).modal("hide"),$(".form-report-use-process").find("#team_id_report option:selected, #category_id_report option:selected").prop("selected",!1),$("button[type=submit]").prop("disabled",!1)):bootbox.alert("Error system")}})),o||($("#no_asset-error").removeClass("hidden"),$("button[type=submit]").prop("disabled",!1)),!1}),$(document).on("change","#category_id_report, #team_id, #date_from, #date_to",function(e){$.ajax({url:urlAjaxGetAssetToReport,type:"GET",data:{categoryId:function(){return $("#category_id_report").val()},teamId:function(){return $("#team_id").val()},dateFrom:$("#date_from").val(),dateTo:$("#date_to").val()},success:function(e){$("#group_assets").html(e.html)},complete:function(){tableReport=$(".asset-table-report").DataTable({paging:!0,lengthChange:!1,searching:!1,ordering:!1,bDestroy:!0,info:!0,autoWidth:!1,columnDefs:[{targets:0,checkboxes:{selectRow:!0}}],select:{style:"multi"},order:[[1,"asc"]]})}})});