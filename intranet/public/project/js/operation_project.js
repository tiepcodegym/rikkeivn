function getCurrentSortName(){return globalCurrentSort.name?globalCurrentSort.name:""}function getCurrentDir(){return globalCurrentSort.current_dir?globalCurrentSort.current_dir:""}function getSortingClass(t){var e=getCurrentDir(),a=getCurrentSortName();return e&&t===a?globalCurrentSort[e]["class"]:""}function getSortingDir(t){var e=getCurrentDir(),a=getCurrentSortName();return e&&t===a?globalCurrentSort[e].dir:"desc"}function mainUpdatePoint(t){var e=$(t).parents("td").find(".production_cost_id"),a=$(t).parents("td").data("year-month"),o=$(t).parents("tr").data("project-id"),n=$(t).parents("tr").data("cost"),r=$(t).parents("tr").data("team-id"),l=parseFloat($(t).val()),i=0;if(!Number.isNaN(l))switch(!0){case l<=0:break;default:i=l}var d={id:e.val(),approved_production_cost:parseFloat(i).toFixed(2),team_id:r,project_id:o,cost:n,year:a.split("-")[0],month:a.split("-")[1],is_future:0},s={id:$(t).parents("tr").data("additional-id"),approved_production_cost:parseFloat(i).toFixed(2),is_future:1},c=$(t).parent();0===$(t).parents("tr").data("additional-id")?updatePoint(d,e,c.data("old-value")):updatePoint(s,e,c.data("old-value")),$(c).html(parseFloat(i).toFixed(2)),$(c).data("old-value",+i)}function updatePoint(t,e,a){$.ajax({url:globalGetPointUpdateUrl,type:"post",dataType:"json",data:t,success:function(t){if(t.data){e.val(t.data.id);var o=t.data.year+"-"+(+t.data.month<10?"0"+ +t.data.month:t.data.month),n=$('.head-index-total[data-index="'+o+'"]'),r=+n.html(),l=r-+a+ +t.data.approved_production_cost;$(n).html(l.toFixed(2))}}})}function getMonthInYear(t,e){t=moment(t),e=moment(e);for(var a=[];t<=e;)a.push(t.format("YYYY-MM")),t.add(1,"months");return a}function setData(t,e){var a,o,n,r="",l="";$("#tblBatchBody thead tr").find(".type").nextAll().remove(),$("#tblBatchBody thead tr").find(".total").nextAll().remove(),n=getMonthInYear(t,e);for(var i=0,d=n.length;i<d;i++){var s="";n[i]===globalCurrentMonth&&(s="month-today"),r+='<th data-value="'+n[i]+'" id="head-month'+i+'" class="cell-month item-month '+s+'">'+n[i],r+="</th>",l+='<th data-index="'+n[i]+'" class="head-index-total" ></th>'}r+='<th class="text-center head-action cell-status sorting '+getSortingClass("status")+'" data-dir="'+getSortingDir("status")+'" data-order="status">Status</th>',r+='<th class="head-action cell-start sorting '+getSortingClass("start_date")+'" data-dir="'+getSortingDir("start_date")+'" data-order="start_date">Start Date</th>',r+='<th class="head-action cell-end sorting '+getSortingClass("end_date")+'" data-dir="'+getSortingDir("end_date")+'" data-order="end_date">End Date</th>',r+='<th class="head-action text-center cell-action" >Action</th>',l+='<th class="text-center cell-status" >  </th>',l+='<th class="head-action cell-start" ></th>',l+='<th class="head-action cell-end" ></th>',l+='<th class="head-action text-center cell-action" ></th>',a=$("#jsSortCompanyName"),$(a).removeClass(),$(a).addClass(getSortingClass("company_name")),$(a).addClass("sorting cell-name head-action"),$(a).data("dir",getSortingDir("company_name")),$(a).data("order","company_name"),o=$("#jsSortType"),$(o).removeClass(),$(o).addClass(getSortingClass("type")),$(o).addClass("sorting cell-type head-action"),$(o).data("dir",getSortingDir("type")),$(o).data("order","type"),$("#tblBatchBody thead tr").find(".type").after(r),$("#tblBatchBody thead tr").find(".total").after(l)}function loadData(){showLoading(),$(".table-responsive ").addClass("hidden"),setData(globalMonthFrom,globalMonthTo);var t,e=globalPage?globalPage:1,a=[location.protocol,"//",location.host,location.pathname].join(""),o=getCurrentSortName(),n=getCurrentDir();t=$(".input-select-team-member").length?$(".input-select-team-member").val():$("#selected-team").data("id");var r={monthFrom:globalMonthFrom,monthTo:globalMonthTo,page:e,url:a,limit:globalPageLimit,typeViewMain:globalTypeViewMain,selectedType:JSON.stringify(globalProjectType),selectedState:JSON.stringify(globalProjectState)};t&&(r.teamId=t),o&&(r.currentSortName=o),n&&(r.currentDir=n),$.ajax({url:globalGetOperationUrl,type:"post",dataType:"json",data:r,success:function(t){$("#example2_paginate").empty(),t.status&&(globalIndex=t.data.from,renderHtmlData(t.data.data),setTotalMMEachMonth(t.totalMMEachMonth),$("#example2_paginate").append(t.html),hideLoading(),loadingIcon(!1))},error:function(t,e,a){"timeout"===e?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)}})}function initDataDetailOfProjectFuture(t,e,a){var o={name:t,type:e,kind_id:a};$.ajax({url:globalGetDataDetailProjectFutureUrl,type:"get",data:o,success:function(t){t.status&&t.data&&renderProjectDataDetailIntoView(t.data)}})}function renderProjectDataDetailIntoView(t){$("#projectFuture .box.box-info").html(t),removeUselessTeam(".project-future-team-member")}function addRowDetail(t,e,a,o){var n=e+1,r="",l=globalDefaultPrice,i="";i+='    <tr data-row="1" tabindex="'+n+'" class="tblDetailInput">',i+="       <td>",i+='          <input type="text" id="activity_month_from'+n+'" name="month" class="form-control form-inline month-picker maxw-100" value="'+a+'" autocomplete="off">',i+="       </td>",i+='       <td class="approved-cost-wrapper">',i+='          <input  type="number" step="any" min="0" class="form-control " id="cost_approved_production'+n+'" name="cost_approved_production'+n+'" placeholder="'+globalHeader["Approved production cost"]+'" value="'+r+'" />',i+="       </td>",i+="       <td>",i+='         <div class="dropdown team-dropdown">',i+="           <span>",i+='               <select id="team-group-'+n+'" name="filter[exception][teamId]" class="form-control filter-grid select-search has-search team-dev-tree'+n+'">',i+="               </select>",i+="           </span>",i+="         </div>",i+="       </td>",i+="       <td>",i+='        <div class="operation-note-input">',i+='<textarea rows="1" class="non-required note_item form-control"  id="approve_cost_note'+n+'" name="approve_cost_note'+n+'" placeholder="'+globalHeader.Note+'"></textarea>',i+="        </div>",i+="       </td>",i+="       <td>",i+='        <div class="operation-note-input">',i+='<input type="number" step="any" min="0" class="non-required approve_cost_item form-control" id="price'+n+'" name="price" value="'+l+'" />',i+="        </div>",i+="       </td>",i+="<td>",i+='<select class="form-control" id="unit_price'+n+'" name="unit_price">';for(var d in globalUnitPrices)globalUnitPrices.hasOwnProperty(d)&&(i+='<option value="'+d+'" ',i+=">",i+=globalUnitPrices[d],i+="</option>");i+="</select></td>",i+='       <td> <span href="#" style="color: seagreen" class="btn-add-row"><i class="fa fa-plus"></i></span> </td>',i+='       <td> <span href="#" style="color: #d33724" class="btn-remove-row "><i class="fa fa-minus"></i></span>  </td>',i+="    </tr>",o.find("#tblOperationBody tbody").append(i),$(".month-picker").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",startDate:"0m",autoclose:!0}).on("changeDate",function(t){}),renderDataSelectTeam(n)}function renderRowSpan(t,e){var a="",o=globalDefaultPrice,n="";n+='    <tr data-row="'+e+'" tabindex="'+t+'">',n+='       <td class="approved-cost-wrapper">',n+='          <input type="number" step="any" min="0" class="form-control" id="cost_approved_production'+t+"_"+e+'" name="cost_approved_production" placeholder="'+globalHeader["Approved production cost"]+'" value="'+a+'" />',n+="       </td>",n+="       <td>",n+='         <div class="dropdown team-dropdown">',n+="           <span>",n+='               <select id="team-group-'+t+"_"+e+'" name="filter['+t+"]["+e+'][exception][teamId]" class="form-control filter-grid select-search has-search team-dev-tree'+t+"_"+e+'">',n+="               </select>",n+="           </span>",n+="         </div>",n+="       </td>",n+="       <td>",n+='        <div class="operation-note-input">',n+='<textarea rows="1" class="non-required note_item form-control"  id="approve_cost_note'+t+"_"+e+'" name="approve_cost_note"  placeholder="'+globalHeader.Note+'" ></textarea>',n+="        </div>",n+="       </td>",n+="       <td>",n+='        <div class="operation-note-input">',n+='<input type="number" step="any" min="0" class="non-required approve_cost_item form-control" id="price'+t+"_"+e+'" name="price" value="'+o+'" />',n+="        </div>",n+="       </td>",n+="<td>",n+='<select class="form-control" id="unit_price'+t+"_"+e+'" name="unit_price">';for(var r in globalUnitPrices)globalUnitPrices.hasOwnProperty(r)&&(n+='<option value="'+r+'" ',n+=">",n+=globalUnitPrices[r],n+="</option>");return n+="</select></td>",n+='       <td> <span href="#" style="color: seagreen" class="btn-add-row"><i class="fa fa-plus"></i></span> </td>',n+='       <td> <span href="#" style="color: #d33724" class="btn-remove-row "><i class="fa fa-minus"></i></span>  </td>',n+="    </tr>"}function showLoading(){$(".loading-icon").removeClass("hidden")}function hideLoading(){$(".loading-icon").addClass("hidden")}function renderDataSelectTeam(t){if("undefined"!=typeof globalTeamModule&&$("select.team-dev-tree"+t).length){var e,a,o,n,r=RKfuncion.teamTree.init(globalTeamModule.teamPath,globalTeamModule.teamSelected);$.each(r,function(t,r){a=r.disabled?" disabled":"",n=r.disabled?" style-disabled":"",o=r.selected?" selected":"",e+='<option class="item-team '+n+'" data-old="'+r.label+'" value="'+r.id+'"'+a+o+">"+r.label+"</option>"}),$("select.team-dev-tree"+t).append('<option value="" class="item-team action-item" data-old="">&nbsp;</option>'),$("select.team-dev-tree"+t).append(e)}}function renderDataChildSelectTeam(t,e){if("undefined"!=typeof globalTeamModule&&$("select.team-dev-tree"+t+"_"+e).length){var a,o,n,r,l=RKfuncion.teamTree.init(globalTeamModule.teamPath,globalTeamModule.teamSelected);$.each(l,function(t,e){o=e.disabled?" disabled":"",r=e.disabled?" style-disabled":"",n=e.selected?" selected":"",a+='<option class="item-team '+r+'" data-old="'+e.label+'" value="'+e.id+'"'+o+n+">"+e.label+"</option>"}),$("select.team-dev-tree"+t+"_"+e).append('<option value="" class="item-team action-item" data-old="">&nbsp;</option>'),$("select.team-dev-tree"+t+"_"+e).append(a)}}function setDataJson(t){var e=t.find("#tblOperationBody tbody tr.tblDetailInput"),a={},o=[];return e.each(function(){var e=$(this).attr("tabindex"),n=t.find("#activity_month_from"+e).val().split("-"),r=[];t.find("#tblOperationBody tbody").find("tr[tabindex="+e+"]:not(:first)").each(function(a){var o=$(this).attr("data-row"),n=t.find("#team-group-"+e+"_"+o).val(),l=t.find("#cost_approved_production"+e+"_"+o).val(),i=t.find("#approve_cost_note"+e+"_"+o).val(),d=t.find("#price"+e+"_"+o).val(),s=t.find("#unit_price"+e+"_"+o).val(),c=t.find("#billable_effort_select"+e+"_"+o).val();r.push({teamId:n,approved_production_cost:l,billable_effort_select:c,approve_cost_note:i,price:d,unit_price:s})}),a={teamId:t.find("#team-group-"+e).val(),approved_production_cost:t.find("#cost_approved_production"+e).val(),approve_cost_note:t.find("#approve_cost_note"+e).val(),billable_effort_select:t.find("#billable_effort_select"+e).val(),month:n[1],year:n[0],price:t.find("#price"+e).val(),unit_price:t.find("#unit_price"+e).val(),detail:r},o.push(a)}),o}function setErrorInput(){var t=$("#tblOperationBody tbody");t.each(function(){$(this).find("input, select").each(function(){$(this).val()?$(this).removeClass("error-input"):($(".error-input-mess").text(globalMessage["Input all"]),$(this).addClass("error-input"))}),$("#tblOperationBody").find(".error-input").length?$(".error-input-mess").show():$(".error-input-mess").hide()})}function generateProjectUrl(t,e){return t>0?'<a target="_blank" class="cell-team-href" href="'+globalProjectUrl.replace("id",t)+'">'+e+"</a>":e}function generateProjectTooltip(t,e){return"0"===t?"":globalTooltipCost+": "+t+" "+e}function renderHtmlData(t){var e,a=$("#tblBatchBody thead tr th").length;if($("#tblBatchBody tbody tr").remove(),t.length&&"undefined"!=typeof t[0].id)for(var o=0,n=t.length;o<n;o++){var r=t[o].start_date.slice(0,7),l=t[o].end_date.slice(0,7),i="Future"===t[o].status?t[o].id:"0";e="",e+='<tr data-cost="'+t[o].cost_approved_production+'"  data-project-id="'+t[o].project_id+'" data-team-id="'+t[o].team_id+'" data-additional-id="'+i+'">',e+='    <td class="cell-no">'+globalIndex+"</td>",e+='    <td class="cell-name">'+t[o].company_name+"</td>",e+='    <td data-toggle="tooltip" data-container="body" title="'+generateProjectTooltip(t[o].cost_approved_production,t[o].type_mm)+'" class="cell-name">'+generateProjectUrl(t[o].project_id,t[o].name)+"</td>",e+='    <td class="cell-type">'+t[o].type+"</td>",e+='    <td class="cell-team">'+t[o].team+"</td>",$("#tblBatchBody thead tr th.item-month").each(function(){var a=$(this).attr("data-value");e+=t[o][a]?'<td class="text-center cell-month" data-year-month="'+a+'"><label class="col-point" data-old-value="'+t[o][a].cost+'">'+parseFloat(t[o][a].cost).toFixed(2)+'</label><input type="hidden" class="production_cost_id" value="'+t[o][a].id+'"/><button type="submit" class="warning-action warning-notification _btn_feedback is-disabled warning-over-cost hidden" data-noti="'+generateProjectTooltip(t[o].cost_approved_production,t[o].type_mm)+". <br> "+globalErrorOverCost+'"/></td>':"Future"!==t[o].status&&a>=r&&a<=l?'<td class="text-center cell-month" data-year-month="'+a+'"><label class="col-point" data-old-value="0">0.00</label><input type="hidden" class="production_cost_id" value=""/><button type="submit" class="warning-action warning-notification _btn_feedback is-disabled warning-over-cost hidden" data-noti="'+generateProjectTooltip(t[o].cost_approved_production,t[o].type_mm)+". <br> "+globalErrorOverCost+'"/></td>':'<td class="cell-month cell-month"></td>'}),e+='<td class="text-center cell-status">'+t[o].status+"</td>","Future"===t[o].status?(e+='<td class="cell-start"></td>',e+='<td class="cell-end"></td>',e+='<td class="text-center cell-action"><button data-toggle="modal" data-target="#projectFuture" data-keyboard="false" data-backdrop="static" data-project-name="'+t[o].name+'" data-project-type="'+t[o].type_id+'" data-project-kind="'+(t[o].kind_id?t[o].kind_id:6)+'" data-id="'+t[o].id+'" type="button" class="btn-edit" ><span><i class="fa fa-edit"></i></span></button><button data-id="'+t[o].id+'" type="button" id="dele-button" class="btn-delete delete-confirm" ><span><i class="fa fa-trash"></i></span></button></td>'):(e+='<td class="text-center cell-start">'+t[o].start_date+"</td>",e+='<td class="text-center cell-end">'+t[o].end_date+"</td>",e+='<td class="cell-action" ></td>'),e+="</tr>",$("#tblBatchBody tbody").append(e),globalIndex++,e=""}else e='<tr><td colspan="'+a+'" class="text-align-center"><h2>'+globalMessage["No results found"]+"</h2></td></tr>",$("#tblBatchBody tbody").append(e),e="";$(".table-responsive ").removeClass("hidden")}function callAjaxDelele(t){$.ajax({url:globalGetOperationUrl,type:"post",dataType:"json",data:t,success:function(t){$("#example2_paginate").empty(),t.status&&(globalIndex=t.data.from,renderHtmlData(t.data.data),setTotalMMEachMonth(t.totalMMEachMonth),$("#example2_paginate").append(t.html),hideLoading())}})}function loadingIcon(t){t?$(".se-pre-con").show():$(".se-pre-con").hide()}function setTotalMMEachMonth(t){$(".head-index-total").each(function(e){var a=$(this),o=$(a).data("index");$(a).html(t[o]?t[o].toFixed(2):0)})}var globalCurrentPoint=0,globalCurrentEditEl=null,globalCurrentSort={name:!1,current_dir:!1,desc:{"class":"sorting_desc",dir:"asc"},asc:{"class":"sorting_asc",dir:"desc"}},globalDefaultPrice="30000000";$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}),$("#activity_month_from").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0}),$("#activity_month_to").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0}),$("#activity_month_from").datepicker("setDate",globalMonthFrom),$("#activity_month_to").datepicker("setDate",globalMonthTo),$(".input-select-team-member").val(gloabalTeamId),$(document).ready(function(){loadingIcon(!0),loadData()}),$("#name").keyup(function(){$(".name-error").text("")}),$(document).on("blur",".tblDetailInput input, .tblDetailInput select",function(){$(this).val()&&$(this).removeClass("error-input"),$("#tblOperationBody").find(".error-input").length?$(".error-input-mess").show():$(".error-input-mess").hide()}),$("#activity_month_from, #activity_month_to, #project_state").change(function(){globalPage=1,globalMonthFrom===$("#activity_month_from").val()&&globalMonthTo===$("#activity_month_to").val()&&globalProjectState===$("#project_state").val()||(globalMonthFrom=$("#activity_month_from").val(),globalMonthTo=$("#activity_month_to").val(),globalProjectType=$("#project_type").val(),globalProjectState=$("#project_state").val(),globalMonthFrom>globalMonthTo?($(".alert-message-error").removeClass("hidden"),$(".str-error-message").text(globalMessage.Montherror)):($(".alert-message-error").addClass("hidden"),$(".str-error-message").text(""),loadData()))}),$("#project_type").change(function(){globalPage=1,globalMonthFrom=$("#activity_month_from").val(),globalMonthTo=$("#activity_month_to").val(),globalProjectType=$("#project_type").val(),globalProjectState=$("#project_state").val(),loadData()}),$(".btn-submit").click(function(t){t.preventDefault();var e=$(t.target).closest(".modal-body"),a=e.find("input[name='_token']").val(),o=e.find("input[name='name']").val(),n=e.find("input[name='name']").data("name-old"),r=e.find(".type").val(),l=e.find(".type").data("type-old"),i=setDataJson(e),d=e.find(".kind_id").val();$.ajax({url:globalPostOperationUrl,type:"post",dataType:"json",data:{_token:a,name:o,type:r,kind_id:d,name_old:n,type_old:l,datadetai:i},success:function(t){t.status&&(e.find("#close-modal").click(),$("#close-modal1").click(),loadData(),$(".alert-message").removeClass("hidden"),setTimeout(function(){$(".alert-message").addClass("hidden")},3e3))},error:function(t){if(422===t.status){setErrorInput();var e=$.parseJSON(t.responseText);$.each(e,function(t,e){$("."+t+"-error").html(e)})}}})}),$(".input-select-team-member").change(function(){loadData()}),$(document).on("click",".col-point",function(){var t=$(this).text();globalCurrentEditEl=this,t&&(globalCurrentPoint=t,$(this).html('<input class="input-point" type="text" value="'+t+'"/>')),$(".input-point").focus(),$(".input-point").select()}),$(document).on("keypress",".input-point",function(t){13===t.which&&$(this).blur()}),$(document).on("blur",".input-point",function(t){var e=$(t.target).closest(".col-point"),a=$(e).data("old-value"),o=$(t.target).val();+a!==+o?(mainUpdatePoint(t.target),$(e).data("old-value",+o)):$(e).html(parseFloat(a).toFixed(2))}),$("body").on("click",".head-action.sorting",function(t){t.preventDefault(),globalCurrentSort.name=$(this).data("order"),globalCurrentSort.current_dir=$(this).data("dir"),loadData()}),$("body").on("click",".pagination a",function(t){t.preventDefault();var e=$(this).attr("href").split("page=")[1];globalPage=e;var a=[location.protocol,"//",location.host,location.pathname].join("");globalCurrentUrl=a;var o,n=$("#activity_month_from").val(),r=$("#activity_month_to").val();o=$(".input-select-team-member").length?$(".input-select-team-member").val():$("#selected-team").data("id"),$(".project").first().click();var l={monthFrom:n,monthTo:r,page:e,url:a,limit:$(".input-sm").val(),typeViewMain:globalTypeViewMain,selectedType:JSON.stringify(globalProjectType),selectedState:JSON.stringify(globalProjectState)};o&&(l.teamId=o);var i=getCurrentSortName(),d=getCurrentDir();i&&(l.currentSortName=i),d&&(l.currentDir=d),callAjaxDelele(l)}),$("body").on("click",".button_tracking",function(t){$("#tblOperationBody tbody tr").remove(),$("#name").val(""),$(".labl-error").text(""),$("#taskModal .btn-operation-project").click()}),$("body").on("click",".btn-edit",function(t){$("#name").val(""),$(".labl-error").text("");var e=$(t.target).closest(".cell-action").find(".btn-edit").data("project-name"),a=$(t.target).closest(".cell-action").find(".btn-edit").data("project-type"),o=$(t.target).closest(".cell-action").find(".btn-edit").data("project-kind");initDataDetailOfProjectFuture(e,a,o)}),$("body").on("click",".btn-operation-project",function(t){var e=$("#tblOperationBody tbody").find(".tblDetailInput").length,a=$("#tblOperationBody tbody").find("tr:last"),o=$(t.target).closest(".modal-body");if(e>0){var n=a.attr("tabindex"),r=$("#activity_month_from"+n).val();addRowDetail(null,e,moment(r).add("month",1).format("YYYY-MM"),o)}else addRowDetail(null,0,moment().format("YYYY-MM"),o),$("#tblOperationBody tbody").find("tr[tabindex=1]").addClass("table-css-no-active");$("#cost_approved_production"+(e+1)).focus(),(e+1)%2==0?$("#tblOperationBody tbody").find("tr[tabindex="+(e+1)+"]").addClass("table-css-active"):$("#tblOperationBody tbody").find("tr[tabindex="+(e+1)+"]").addClass("table-css-no-active")}),$("body").on("click",".btn-add-row",function(t){var e=$(this),a="",o=e.closest("tr"),n=e.closest("tr"),r=Number(o.attr("data-row")),l=o.find("td:first").attr("rowspan"),i=o.attr("tabindex"),d=Number($("#tblOperationBody tbody").find("tr[tabindex="+i+"]").length)+1;if(l){a=renderRowSpan(i,Number(l)+1);var s=$("#tblOperationBody tbody").find("tr[tabindex="+i+"]").first();s.find("td:first").attr("rowspan",Number(l)+1)}else{a=renderRowSpan(i,r+1);var s=$("#tblOperationBody tbody").find("tr[tabindex="+i+"]").first();s.find("td:first").attr("rowspan",r+1)}if(n.after(a),i%2==0?$("#tblOperationBody tbody").find("tr[tabindex="+i+"]").addClass("table-css-active"):$("#tblOperationBody tbody").find("tr[tabindex="+i+"]").addClass("table-css-no-active"),d>1){var c=$("#tblOperationBody tbody").find("tr[tabindex="+i+"]").first(),p=$("#tblOperationBody tbody").find("tr[tabindex="+i+"]:not(:last)");p.find(".btn-add-row").addClass("hidden"),c.find(".btn-add-row, .btn-remove-row").addClass("hidden")}l?renderDataChildSelectTeam(i,Number(l)+1):renderDataChildSelectTeam(i,r+1)}),$("body").on("click",".btn-remove-row ",function(t){var e=$(this),a=e.closest("tr"),o=e.closest("tr");if(1==o.find("tr").length)o.remove();else{a.remove();var n=o.attr("tabindex"),r=$("#tblOperationBody tbody").find("tr[tabindex="+n+"]").first(),l=r.find("td:first").attr("rowspan");r.find("td:first").attr("rowspan",l-1);var i=$("#tblOperationBody tbody").find("tr[tabindex="+n+"]").last();i.find(".btn-add-row").removeClass("hidden"),$("#tblOperationBody tbody").find("tr[tabindex="+n+"]").length&&i.find(".btn-remove-row ").removeClass("hidden"),i.find(".btn-add-row").removeClass("hidden"),$("#tblOperationBody tbody").find("tr[tabindex="+n+"]").length&&i.find(".btn-remove-row ").removeClass("hidden")}}),$("body").on("click",".btn-ok",function(t){var e;e=$(".input-select-team-member").length?$(".input-select-team-member").val():$("#selected-team").data("id"),$.ajax({url:globalDeleteOperationUrl,type:"post",dataType:"json",data:{id:globalId},success:function(t){if(t.status){var a={monthFrom:globalMonthFrom,monthTo:globalMonthTo,page:globalPage,url:globalCurrentUrl,limit:$(".input-sm").val(),typeViewMain:globalTypeViewMain,selectedType:JSON.stringify(globalProjectType),selectedState:JSON.stringify(globalProjectState)};e&&(a.teamId=e);var o=getCurrentSortName(),n=getCurrentDir();o&&(a.currentSortName=o),n&&(a.currentDir=n),callAjaxDelele(a),$(".alert-message-delete").removeClass("hidden"),setTimeout(function(){$(".alert-message-delete").addClass("hidden")},3e3)}},error:function(t,e,a){"timeout"===e?$("#modal-warning-notification .modal-body p.text-default").text(globalErrorTimeoutText):$("#modal-warning-notification .modal-body p.text-default").text(globalErrorText)}})}),$("body").on("click","#dele-button",function(t){globalId="",globalId=$(this).attr("data-id")}),$("body").on("change",".input-sm",function(t){globalPageLimit=$(".input-sm").val(),globalPage=1,loadData(),globalIndex=1});