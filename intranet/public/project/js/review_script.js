!function(t){function e(t){var e={};"undefined"!=typeof t.attr("data-placeholder")&&(e={allowClear:!0,placeholder:t.attr("data-placeholder")}),"undefined"!=typeof t.attr("data-url")&&t.attr("data-url")&&(e.minimumInputLength=2,e.ajax={url:t.attr("data-url"),dataType:"json",delay:250,data:function(t){return{q:t.term,page:t.page}},processResults:function(t,e){return e.page=e.page||1,{results:t.items,pagination:{more:20*e.page<t.total_count}}},cache:!0}),t.select2(e)}function a(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}setTimeout(function(){t(".month-picker").datepicker({format:"yyyy-mm",viewMode:"months",minViewMode:"months",autoclose:!0,clearBtn:!0}).on("changeDate",function(e){var a=e.date.getMonth()+1,r=e.date.getFullYear()+"-"+(a<10?"0"+a:a),o=t("#filter_projects").val();return!checkNewVersion(r,o)&&void t(".btn-search-filter").click()});var a=t(".month-picker").val();a&&checkNewVersion(a,t("#filter_projects").val());var r=t("#_me_table");r.length>0&&r.find("tbody tr:first").appendTo(r.find("thead")),t(".fixed-table-container table td select").each(function(){e(t(this))})},500),t("#notEvaluate").on("show.bs.modal",function(e){var a=t(e.relatedTarget);t(this).find(".modal-title").text(a.text())}),t(document).ready(function(){t.ajax({type:"GET",url:urlStatistic,success:function(e){t("#_me_table tbody tr:not(.tr-filter)").remove(),t("#_me_table tbody").append(e.review_items.collection_html),t("#collection_pager").html(e.review_items.collection_pager);var r=t(".fixed-table thead tr:first .fixed-col").length;t(".fixed-table").tableHeadFixer({left:r});var o=t("#footer_statistic");t.each(e.statistic,function(t,e){var a=parseInt(e.num);"undefined"!=typeof e.percent&&(a+=" ("+e.percent+"%)"),o.find(".val-"+t).text(a)}),t("#head_statistic").html(t("#footer_statistic").html()).removeClass("hidden");var n="",l=e.proj_not_eval;if(l.length>0){t("#proj_not_eval_box").removeClass("hidden");for(var i=0;i<l.length;i++){var s=l[i],d="";s.email&&(d=s.email.split("@")[0],d='<span class="text-uppercase">'+a(d)+"</span>");var c=s.employees?s.employees.split(","):[],m=t("#proj_member_collapse").clone();m.removeClass("hidden").removeAttr("id"),m.find(".proj-name").html(a(s.name)+" - "+d);var p="";if(c.length>0){m.find(".box-tools").removeClass("hidden"),p="<ul>";for(var u=0;u<c.length;u++){var f=c[u];p+='<li class="member-not-eval">'+a(f)+"</li>"}p+="</ul>"}m.find(".members-list").append(p),n+="<tr>",n+='<td><a href="'+projPoinEditUrl+"/"+s.id+'" target="_blank">'+a(s.project_code_auto)+"</a></td><td><p>"+textProjName+" : "+a(s.name)+"</p><p>"+textPmName+": "+d+"</span></p><p>"+textViewGroup+": "+a(s.team_names)+"</p></td><td>"+m[0].outerHTML+"</td>",n+="</tr>"}t("#table-not-eval tbody").html(n),t("#table-not-eval").DataTable()}t("#total_member").text(e.total_member)},error:function(){t("#footer_statistic").html("Something error!")}})}),t("body").on("submit","._action_btns form",function(e){e.preventDefault();var a=t(this).find('button[type="submit"]'),r=t(this).attr("action"),o=t(this).find('input[name="_method"]').val();o||t(this).attr("method");var n=t(this).closest("tr"),l=n.attr("data-eval"),i=t('tr[data-eval="'+l+'"]');i.addClass("processing");var s=t(this).parent();return t.ajax({url:r,type:"POST",data:t(this).serialize(),success:function(t){t.success?("DELETE"==o?i.remove():(s.find(".form_after_submit").remove(),n.find(".status_label").text(t.status_label),i.find('input[type="checkbox"]').remove()),_showStatus(t.message)):showModalError(t.message)},complete:function(){a.prop("disabled",!1),i.removeClass("processing")}}),!1})}(jQuery);