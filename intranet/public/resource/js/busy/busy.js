!function(e,a,r,t){var o="object"==typeof globalPassModule?globalPassModule:{},d="object"==typeof o.trans?o.trans:{},i={init:function(){var a=this;a.domList=e("[data-pager-list]");var r=e('[data-progress-dom="wrapper"]');a.filterInit(),a.addFilterSkills(),a.htmlProgrssItem=r.html(),r.html("{htmlProgess}"),a.htmlItem=e("[data-pager-item]")[0].outerHTML,a.pagerUrl=a.domList.data("pager-url"),a.isProcess=!1,e("[data-pager-item]").remove(),a.formSearch=e("form#form-busy"),a.icoLoading=a.formSearch.find('[data-ico-load="ajax"]'),a.domNotResult=e("[data-pager-not]"),a.domResult=e("[data-pager-result]"),a.btnSearch=e("[data-pager-search-btn]"),a.validate(),a.plugin(),a.widthProgress=0,a.domPagerMore=e("[data-pager-more]"),a.btnSearch.click(function(e){e.preventDefault(),a.sendRequest()})},sendRequest:function(){var r=this;return!!r.isProcess||(!r.formSearch.valid()||(r.ajaxLoadMore&&(r.ajaxLoadMore.abort(),r.ajaxLoadMore=null),r.btnSearch.prop("disabled",!0),r.icoLoading.removeClass("hidden"),r.isProcess=!0,void e.ajax({url:r.pagerUrl,type:"get",dataType:"json",data:r.formSearch.find("[data-pager-input]").serialize(),success:function(t){if(r.domList.html(""),!t.status)return a.notify(t.message,!1),!0;r.calPeriodNumber(t.data,!0);var o=0;e.each(t.data,function(e,a){o++,r.renderItem(a)}),o?(r.domNotResult.addClass("hidden"),r.domResult.removeClass("hidden"),r.renderCount(t.count)):(r.domNotResult.removeClass("hidden"),r.domResult.addClass("hidden"))},error:function(){r.domList.html(""),a.notify("System error",!1)},complete:function(){r.isProcess=!1,r.icoLoading.addClass("hidden"),r.btnSearch.prop("disabled",!1)}})))},renderItem:function(a){var r=this;a.data.email=a.data.email.replace(/@.*$/,""),a.data.url=o.urlCV.replace(/xxx/gi,a.data.id);var t=r.htmlItem;e.each(a.data,function(e,a){var r=new RegExp("{"+e+"}","gi");t=t.replace(r,a)}),t=t.replace(/\{htmlProgess\}/gi,r.renderProgressBar(a.period)),r.domList.append(t)},renderCount:function(a){"object"!=typeof a&&(a={}),e.each(a,function(a,r){e('[data-count-busy="'+a+'"]').text(r)})},renderProgressBar:function(a){var r=this,t="";return e.each(a,function(e,a){var o;o=a>100?"red":a>80?"green":a>0?"yellow":"white",t+=r.htmlProgrssItem.replace(/\{week\}/gi,e).replace(/\{effort\}/gi,a).replace(/\{color\}/gi,o).replace(/\{width\}/gi,r.widthProgress)}),t},scrollLoadMore:function(){var t=this;e(r).scroll(function(){if(!t.domPagerMore.data("enableLoad")||t.domPagerMore.data("isLoading")||t.isProcess)return!0;var o=e(r).scrollTop()+e(r).height(),d=t.domPagerMore.offset().top;if(o<d)return!0;t.domPagerMore.data("isLoading",1);var i=t.formSearch.serialize(),n=parseInt(t.domPagerMore.data("page")+1);i+="&page="+n,t.ajaxLoadMore=e.ajax({url:t.pagerUrl,type:"get",dataType:"json",data:i,success:function(r){if(!r.status)return a.notify(r.message,!1),!0;var o=0;e.each(r.data,function(e,a){o++,t.renderItem(a)}),o<50?(t.domPagerMore.data("enableLoad",0),t.domPagerMore.addClass("hidden")):(t.domPagerMore.data("enableLoad",1),t.domPagerMore.removeClass("hidden")),t.domPagerMore.data("page",n)},error:function(){},complete:function(){t.domPagerMore.data("isLoading",0)}})})},validate:function(){var e=this;e.formSearch.submit(function(e){e.preventDefault()}),e.formSearch.validate({messages:{end:{greaterEqualThan:d.end_greater}},rules:{start:{required:!0,date:!0},end:{required:!0,date:!0,greaterEqualThan:'[name="start"]'}}})},plugin:function(){e('input[data-flag-type="date"]').datepicker({format:"yyyy-mm-dd",useCurrent:!1,autoclose:!0,todayHighlight:!0}),a.select2.init()},calPeriodNumber:function(a,r){var t=this;return!(!t.widthProgress||r)||(e.each(a,function(e,a){var r=Object.keys(a.period).length;return r?t.widthProgress=100/r:t.widthProgress=0,!1}),t.widthProgress)},filterInit:function(){t.teamTree.init(o.teamPath),e('[data-fg-dom="team-dev"]').html(t.teamTree.renderOptionSelect())},addFilterSkills:function(){var r,t=this,o=1;t.domWrapSkills=e('[data-fg-dom="filter-skill"]'),t.htmlFilterSkill=t.domWrapSkills.html(),t.domWrapSkills.html("").removeClass("hidden"),e('[data-fg-dom="btn-add-skill"]').click(function(){r=t.htmlFilterSkill.replace(/xxx/gi,o),r=e(r),t.domWrapSkills.append(r),a.select2.init(),o++}),e(document).on("click",'[data-fg-dom="btn-remove-skill"]',function(){e(this).closest('[data-fg-dom="f-skill-item"]').remove()})}};i.init()}(jQuery,RKExternal,window,RKfuncion);