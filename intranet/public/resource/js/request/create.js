function generate(e,t,a){$.ajax({url:a,type:"post",dataType:"html",data:{_token:t,id:e}})}function changeTeam(e){refreshOptionTeam();var t=$(e);t.parent().find(".error").remove();var a=t.val();0==parseInt(a)&&t.parent().append(messageRequired)}function addBoxPosition(e){$(e).before($htmlBoxPosition);for(var t=$(e).closest(".box"),a=getPositionSelected(t),n=t.find(boxPositionClass+":last"),i=n.find(positionApplyClass),o=a.length,s=0;s<o;s++)i.find("option[value="+a[s]+"]").prop("disabled",!0);i.select2(),delBtnRemovePosition()}function changePosition(e){var t=$(e).closest(".box");refreshOptionPosition(t);var a=$(e);a.parent().find(".error").remove();var n=a.val();0==parseInt(n)&&a.parent().append(messageRequired)}function numberInput(e){var t=$(e);t.parent().find(".error").remove();var a=t.val().trim();(!a||parseInt(a)<=0)&&t.parent().append(messageRequired)}function getPositionSelected(e){var t=[];return e.find(boxPositionClass).not(".hidden").each(function(){var e=$(this).find(positionApplyClass).val();0!=parseInt(e)&&t.push(e)}),t}function getTeamSelected(){var e=[];return $teamsContainer.find(boxTeamClass).not(".hidden").each(function(){var t=$(this).find(selectTeamClass).val();0!=parseInt(t)&&e.push(t)}),e}function validateTeam(){var e=!0;return $teamsContainer.find(".error").remove(),0==$teamsContainer.find(boxTeamClass).length&&(e=!1),$teamsContainer.find(boxTeamClass).not(".hidden").each(function(){var t=$(this).find(selectTeamClass),a=t.val();0==parseInt(a)&&(e=!1,t.parent().append(messageRequired)),$(this).find(boxPositionClass).not(".hidden").each(function(){var t=$(this).find(positionApplyClass),a=$(this).find(numberClass),n=t.val(),i=a.val().trim();0==parseInt(n)&&(e=!1,t.parent().append(messageRequired)),(!i||parseInt(i)<=0)&&(e=!1,a.parent().append(messageRequired))})}),e}function removePosition(e){$(e).closest(boxPositionClass).addClass("hidden");var t=$(e).closest(".box");refreshOptionPosition(t),delBtnRemovePosition()}function removeTeam(e){$(e).closest(boxTeamClass).addClass("hidden"),refreshOptionTeam(),delBtnRemoveTeam()}function refreshOptionPosition(e){var t=getPositionSelected(e);e.find(positionApplyClass).not(".hidden").each(function(){$(this).find("option").prop("disabled",!1);for(var e=$(this).val(),a=t.length,n=0;n<a;n++)t[n]!=e&&$(this).find("option[value="+t[n]+"]").prop("disabled",!0);$(this).select2()})}function refreshOptionTeam(){var e=getTeamSelected();$teamsContainer.find(selectTeamClass).not(".hidden").each(function(){$(this).find("option[option!=1]").prop("disabled",!1);for(var t=$(this).val(),a=e.length,n=0;n<a;n++)e[n]!=t&&$(this).find("option[value="+e[n]+"]").prop("disabled",!0);selectSearchReload()})}function delBtnRemovePosition(){$teamsContainer.find(boxTeamClass).not(".hidden").each(function(){1==$(this).find(boxPositionClass).not(".hidden").length?$(this).find(btnRemovePositionClass).addClass("hidden"):$(this).find(btnRemovePositionClass).removeClass("hidden")})}function delBtnRemoveTeam(){1==$teamsContainer.find(boxTeamClass).not(".hidden").length?$teamsContainer.find(btnRemoveTeamClass).addClass("hidden"):$teamsContainer.find(btnRemoveTeamClass).removeClass("hidden")}function getDataRequest(){var e=$("#form-create-request"),t={title:e.find('input[name="title"]').val(),is_hot:e.find('input[name="is_hot"]').val(),position:t,request_id:e.find('input[name="request_id"]').val(),expired:e.find('input[name="deadline"]').val(),place:e.find('select[name="location"]').val(),salary:e.find('input[name="salary"]').val(),description:e.find('textarea[name="description"]').val(),benefits:e.find('textarea[name="benefits"]').val(),qualifications:e.find('textarea[name="job_qualifi"]').val(),_token:e.find('input[name="_token"]').val(),programs:t,types:t,status_request:e.find('select[name="status"]').val()};$(".teams-container .box-position").each(function(){var e=$(this).find("select.position-apply").val(),a=$(this).find(".number-resource").val();t["positions["+e+"]"]=a});var a=e.find('select[name="programs[]"]').val(),n=e.find('select[name="typecandidate[]"]').val();return a&&(t.programs=a.join(",")),n&&(t.types=n.join(",")),t}$(".btn-submit-confirm").on("click",function(){$("#modal-submit-confirm").modal("show")}),$(".btn-publish-request").on("click",function(){$("#modal-publish-request").modal("show")}),$(".btn-ok").on("click",function(e){var t=$(this).attr("data-publish");if(parseInt(t)===statusPublished){var a=$("#form-create-request"),n=getDataRequest();$(".teams-container .box-position").each(function(){var e=$(this).find("select.position-apply").val(),t=$(this).find(".number-resource").val();n["positions["+e+"]"]=t});var i=a.find('select[name="programs[]"]').val(),o=a.find('select[name="typecandidate[]"]').val();return i&&(n.programs=i.join(",")),o&&(n.types=o.join(",")),$.ajax({type:"POST",url:urlPostRequest,data:n,complete:function(){$("#form-create-request").submit()}}),!1}$("#modal-submit-confirm").modal("hide")}),$(document).ready(function(){$("#interviewer").change(function(){var e=$(this).val();null==e?$("#chk_interviewer").val(""):($("#chk_interviewer").val(1),$("#chk_interviewer-error").remove())}),$("#type").change(function(){var e=$(this).val();null==e?$("#chk_type").val(""):($("#chk_type").val(1),$("#chk_type-error").remove())}),$("#form-create-request").validate({rules:{title:{requiredTrim:!0,maxlength:255},customer:{maxlength:50},set_content:"required",request_date:"requiredTrim",start_working:"requiredTrim",end_working:{greaterThan:"#start_working"},effort:{valueNotEquals:"0"},location:{valueNotEquals:"0"},interviewer:{valueNotEquals:"0"},chk_interviewer:"required",deadline:"requiredTrim",salary:"requiredTrim",chk_type:"required",approve:{valueNotEquals:"0"},select_team:"required",skill:{valueNotEquals:"0"},recruiter:{valueNotEquals:"0"}},messages:{title:{requiredTrim:requiredText},set_content:requiredText,request_date:requiredText,number_resource:requiredText,start_working:requiredText,end_working:{greaterThan:checkWorkingDate},effort:{valueNotEquals:requiredText},location:{valueNotEquals:requiredText},interviewer:{valueNotEquals:requiredText},chk_interviewer:requiredText,chk_type:requiredText,deadline:{required:requiredText},salary:requiredText,approve:{valueNotEquals:requiredText},select_team:requiredText,skill:{valueNotEquals:requiredText},recruiter:{valueNotEquals:requiredText}}}),jQuery.validator.addMethod("validateEndWorking",function(e,t,a){return!($(".end-working-container").hasClass("display-end-wroking")&&e&&$(a).val())||(/Invalid|NaN/.test(new Date(e))?isNaN(e)&&isNaN($(a).val())||Number(e)>Number($(a).val()):new Date(e)>new Date($(a).val()))},checkWorkingDate),$(".date").datepicker({todayBtn:"linked",language:"it",autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"})}),numberFormat($("#salary"));var $startWorking=$("#start_working"),$endWorking=$("#end_working"),$requestDate=$("#request_date"),$deadline=$("#deadline");$startWorking.datepicker({autoclose:!0,format:"yyyy-mm-dd",todayHighlight:!0,todayBtn:"linked"}).on("changeDate",function(){$endWorking.datepicker("setStartDate",$startWorking.val()),$endWorking.datepicker("setFormat","yyyy-mm-dd"),$requestDate.datepicker("setEndDate",$startWorking.val())}),$endWorking.datepicker({autoclose:!0,startDate:"0",format:"yyyy-mm-dd",todayHighlight:!0,todayBtn:"linked"}).on("changeDate",function(){$startWorking.datepicker("setEndDate",$endWorking.val())}),$requestDate.datepicker({autoclose:!0,format:"yyyy-mm-dd",todayHighlight:!0,todayBtn:"linked"}).on("changeDate",function(){$deadline.datepicker("setStartDate",$requestDate.val()),$startWorking.datepicker("setStartDate",$requestDate.val())}),$deadline.datepicker({autoclose:!0,startDate:"0",format:"yyyy-mm-dd",todayHighlight:!0,todayBtn:"linked"}).on("changeDate",function(){$requestDate.datepicker("setEndDate",$deadline.val())}),$("#onsite").on("change",function(){var e=$(this).val();e==onsiteOn?($(".end-working-container").show(),$(".end-working-container").addClass("display-end-wroking")):($(".end-working-container").hide(),$(".end-working-container").removeClass("display-end-wroking"))});var $selectTeam=$(".select-team"),$modalTeam=$("#modal-teams"),$btnAddTeam=$(".btn-add-team"),$addBoxTeam=$(".add-box-team"),$htmlBoxTeam=$addBoxTeam.html(),$boxPosition=$addBoxTeam.find(".box-position"),$htmlBoxPosition=$boxPosition[0].outerHTML,$btnAddPosition=$(".btn-add-position"),$teamsContainer=$(".teams-container"),boxTeamClass=".team-container",selectTeamClass="select.team",boxPositionClass=".box-position",positionApplyClass=".position-apply",numberClass=".number-resource",messageRequired='<label class="error bottom--24px">'+requiredText+"</label>",btnRemovePositionClass=".btn-delete-row",btnRemoveTeamClass=".btn-danger";$selectTeam.on("click",function(){$teamsContainer.find(boxTeamClass+"[data-has!=1]").remove(),0==$teamsContainer.find(boxTeamClass+"[data-has=1]").length?$btnAddTeam.trigger("click"):$teamsContainer.find(boxTeamClass).each(function(){var e=$(this).attr("data-has");1==parseInt(e)&&($(this).removeClass("hidden"),$(this).find(boxPositionClass).each(function(){var e=$(this).attr("data-has");1==parseInt(e)?$(this).removeClass("hidden"):$(this).remove()}))}),delBtnRemovePosition(),delBtnRemoveTeam(),$modalTeam.modal("show")}),$btnAddTeam.on("click",function(){$(this).before($htmlBoxTeam);for(var e=getTeamSelected(),t=$teamsContainer.find(boxTeamClass+":last"),a=t.find(selectTeamClass),n=e.length,i=0;i<n;i++)a.find("option[value="+e[i]+"]").prop("disabled",!0);selectSearchReload();var o=t.find(positionApplyClass+":last");o.select2(),delBtnRemovePosition(),delBtnRemoveTeam()}),$(".save-team").on("click",function(){var e=validateTeam();if(e){$("input.team-val").remove();var t="";$teamsContainer.find(boxTeamClass).each(function(){if($(this).hasClass("hidden"))$(this).remove();else{$(this).attr("data-has",1);var e=$(this).find(selectTeamClass),a=e.val(),n=e.find("option:selected").text().trim();$(this).find(boxPositionClass).each(function(){if($(this).hasClass("hidden"))$(this).remove();else{$(this).attr("data-has",1);var e=$(this).find(positionApplyClass),t=$(this).find(numberClass),n=e.val(),i=t.val().trim();$("#form-create-request").prepend('<input class="team-val" type="hidden" name="teams['+a+"]["+n+']" value="'+i+'" />')}}),t+=""==t?n:", "+n}}),$selectTeam.val(t),$modalTeam.modal("hide"),$("#select_team").val(t),$("#select_team-error").remove()}}),$("#set-content").on("click",function(){$("#modal-content").modal("show")}),$(".save-content").on("click",function(){var e=CKEDITOR.instances.content.getData();$("#set_content").val(e),$("#set_content-error").remove(),e?$("#set-content").attr("placeholder",updateContentText):($("#set-content").attr("placeholder",addContentText),$("#set_content").after('<label id="set_content-error" class="error" for="set_content" style="display: block;">'+requiredText+"</label>"))}),$(".btn-publish-ok").click(function(e){var t=$("div#input_value"),a={title:t.find("#title").val(),hot:t.find("#is_hot").val(),position:a,request_id:requestId,expired:t.find("#deadline").val(),place:t.find("#location").val(),salary:t.find("#salary").val(),description:t.find("#description").val(),benefits:t.find("#benefits").val(),programs:t.find("#programs").val(),types:t.find("#types").val(),qualifications:t.find("#job_qualifi").val(),_token:_token,status_request:t.find("#status").val(),publish:!0};$(".teams-container .box-position").each(function(){var e=$(this).find("select.position-apply").val(),t=$(this).find(".number-resource").val();a["positions["+e+"]"]=t});t.find("#programs").val(),t.find("#types").val();$.ajax({type:"POST",url:urlPostRequest,data:a,error:function(){bootbox.alert("Error. Please try later.")},success:function(){bootbox.alert("Publish request success"),$(".btn-publish-request").text("Published").prop("disabled",!0)}}),$("#modal-publish-request").modal("hide")}),$(".btn-publish-recruitment").click(function(e){var t=$("div#input_value"),a={title:t.find("#title").val(),hot:t.find("#is_hot").val(),position:a,request_id:requestId,expired:t.find("#deadline").val(),request_date:t.find("#request_date").val(),place:t.find("#location").val(),salary:t.find("#salary").val(),description:t.find("#description").val(),benefits:t.find("#benefits").val(),programs:t.find("#programs").val(),types:t.find("#types").val(),qualifications:t.find("#job_qualifi").val(),_token:_token,status_request:t.find("#status").val(),publish:!0};$(".teams-container .box-position").each(function(){var e=$(this).find("select.position-apply").val(),t=$(this).find(".number-resource").val();a["positions["+e+"]"]=t}),$.ajax({type:"POST",url:urlPostRequestRecruitment,data:a,error:function(){bootbox.alert("Error. Please try later.")},success:function(){bootbox.alert("Publish request success")}}),$("#modal-publish-request").modal("hide")});