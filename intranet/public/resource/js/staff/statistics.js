!function(t){function e(t,e){return t.indexOf(e)<0&&t.push(e),t}function a(t,e){var a=12*(e.getFullYear()-t.getFullYear());return a+=e.getMonth()-t.getMonth()+1,a<0?0:a}t(document).ready(function(){function n(t,e){var a=[];"undefined"==typeof e&&(e=null);for(var r in t)if(t[r].parentId==e){i[r]=t[r],a=a.concat(t[r].data);var d=n(t,r);d&&r!=TEAM_BOD_ID&&(i[r].data=i[r].data.concat(d),a=a.concat(d))}return a}var r=[];t(".team-data").each(function(){var e=t(this).text();t(this).text(""),e=e?JSON.parse(e):[];var a=t(this).closest("tr"),n=parseInt(a.data("id"));r[n]={id:n,parentId:a.data("parent")?parseInt(a.data("parent")):null,data:e}});var i=[];n(r,null);var d=new Date(dateEnd);t(".team-data").each(function(){var n=t(this).closest("tr"),r=parseInt(n.data("id")),o="undefined"!=typeof i[r]?i[r].data:[];if(o){var f=[],s=[],c=[],u=[];for(var l in o){var h=o[l].id;e(f,h);var p=o[l].roles;if(p){p=t.isNumeric(p)?[p]:JSON.parse(p);for(var v=0;v<p.length;v++){var y=parseInt(p[v]);"undefined"==typeof s[y]&&(s[y]=[]),e(s[y],h)}}else"undefined"==typeof s[-1]&&(s[-1]=[]),e(s[-1],h);var x=new Date(o[l].date_join),I=a(x,d);for(var g in aryWorkTimes){var m=aryWorkTimes[g];"undefined"==typeof c[g]&&(c[g]=[]),I>=m.from&&I<m.to&&e(c[g],h)}var D=o[l].contract_type;D||(D=-1),"undefined"==typeof u[D]&&(u[D]=[]),e(u[D],h)}n.find(".col-total").text(f.length),n.find(".col-role").each(function(){var e=parseInt(t(this).data("role"));"undefined"!=typeof s[e]?t(this).text(s[e].length):t(this).text(0)}),n.find(".col-time").each(function(){var e=parseInt(t(this).data("month"));"undefined"!=typeof c[e]?t(this).text(c[e].length):t(this).text(0)}),n.find(".col-contract").each(function(){var e=parseInt(t(this).data("type"));"undefined"!=typeof u[e]?t(this).text(u[e].length):t(this).text(0)})}}),t(".statistics-table").tableHeadFixer({left:fixedCols})})}(jQuery);