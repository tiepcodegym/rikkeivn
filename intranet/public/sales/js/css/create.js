function setMarginTopEndDate(){var e=$.trim($("#start_date").val());$(window).width()<678&&""===e?$("#end_date").parent().css("margin-top","30px"):$("#end_date").parent().css("margin-top","0")}function setTeam(e){var a=$("#set_pj").val();return 0==a?($("input[type=text]").each(function(){var e=$(this).attr("id");"employee_name"!=e&&"japanese_name"!=e&&"rikker_relate_check"!=e&&"rikker_relate_validate"!=e&&$(this).val("")}),!1):void $.ajax({url:baseUrl+"css/setTeam",type:"post",dataType:"json",data:{_token:e,projsId:a}}).done(function(e){var a=e.cus_name;e.cus_email&&(a+=" ("+e.cus_email+")"),$("#company_name").val(e.company_name),$("#customer_name").val(a),$("#project_name").val(e.name),$(".project_type").html(e.type),$("input[name=pm_email]").val(e.pm_name+" ("+e.pm_account+")"),$("#pm_email_name").val(e.pm_name),$("#end_date").datepicker("setDate",e.end)?$("#start_date").datepicker("setDate",e.start):$("#start_date").datepicker("setDate",e.start),$("#team_relate").val(e.teamNames),$("#team_ids").val(e.teamIds),$("#project_code").val(e.project_code),""!=e.japanese_name&&$("#pm_name_jp-error").remove(),"undefined"==typeof e.cus_name&&$("#modal-no-customer").modal("show"),"ONSITE"==e.type?$(".onsite-date-container").removeClass("hidden"):$(".onsite-date-container").addClass("hidden")}).fail(function(){alert("Ajax failed to fetch data")})}function validate(){$("#japanese_name-error").remove(),$("#pj-error").remove(),$("#pm_name_jp-error").remove(),$("#rikker-relate-error").remove(),$("#rikker-relate-validate-error").remove();var e=$.trim($("#japanese_name").val()),a=$("#set_pj").val(),t=$.trim($("#pm_email_jp").val()),r=!1;return 0==a&&($("#set_pj").after('<label id="pj-error" class="error" for="name">'+requiredProj+"</label>"),r=!0),""==e&&($("#japanese_name").after('<label id="japanese_name-error" class="error" for="name">'+requiredName+"</label>"),r=!0),""==t&&($("#pm_email_jp").after('<label id="pm_name_jp-error" class="error" for="name">'+requiredName+"</label>"),r=!0),""==$.trim($("#rikker_relate_check").val())&&($(".rikker-relate-container").after('<label id="rikker-relate-error" class="error" for="name">'+requiredRelPerson+"</label>"),r=!0),""==$.trim($("#rikker_relate_validate").val())&&($(".rikker-relate-container").after('<label id="rikker-relate-validate-error" class="error" for="name">'+requiredEmail+"</label>"),r=!0),""==$.trim($("#start_date").val())&&($("#start_date").after('<label id="start_date-error" class="error" for="name">'+requiredStartDate+"</label>"),r=!0),""==$.trim($("#end_date").val())&&($("#end_date").after('<label id="end_date-error" class="error" for="name">'+requiredEndDate+"</label>"),r=!0),""==$.trim($("#time_reply").val())&&0==$("input[name=lang]:checked").val()?($("#time_reply").after('<label id="time_reply-error" class="error" for="name">'+requiredTimeReply+"</label>"),r=!0):$("#time_reply-error").html(""),$(".onsite-date-container").hasClass("hidden")||(""==$.trim($("#start_onsite_date").val())&&($("#start_onsite_date").after('<label id="start_onsite_date-error" class="error" for="name">'+requiredStartOnsite+"</label>"),r=!0),""==$.trim($("#end_onsite_date").val())&&($("#end_onsite_date").after('<label id="end_onsite_date-error" class="error" for="name">'+requiredEndOnsite+"</label>"),r=!0)),r}$("input[type=text]").each(function(){var e=$(this).attr("id");"employee_name"!=e&&"japanese_name"!=e&&"rikker_relate"!=e&&"pm_email_jp"!=e&&"rikker_relate_check"!=e&&"rikker_relate_validate"!=e&&"start_date"!=e&&"end_date"!=e&&"time_reply"!=e&&"css_creator_name"!=e&&"project_name_css"!=e&&"start_onsite_date"!=e&&"end_onsite_date"!=e&&$(this).prop("disabled",!0)}),$("input").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"});var teamArray=[];$(window).resize(function(){setMarginTopEndDate()}),$(document).ready(function(){$(".project_type input[type=radio]:first-child").prop("checked",!0),$(".team-tree a").removeAttr("href"),$(".team-tree a").attr("onclick","change_bgcolor_element(this)"),$("#start_date").on("changeDate",function(){$(this).datepicker("hide"),$("#start_date").css("color","#555").css("font-size","14px"),$("#start_date-error").remove()}),$("#end_date").on("changeDate",function(){$(this).datepicker("hide"),$("#end_date").css("color","#555").css("font-size","14px"),$("#end_date-error").remove()})}),$(document).ready(function(){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&$(".date").css("top","-1px")}),$("#rikker_relate").keydown(function(e){var a=e.keyCode||e.which,t=$.trim($(this).val());if(8===a&&""===t)backSpace("rikker_relate");else if(9===a||13===a||188===a||186===a){var t=$.trim($("#rikker_relate").val());if((void 0===ajaxLoadingEmail["#rikker_relate"]||ajaxLoadingEmail["#rikker_relate"])&&void 0!==ajaxLoadingEmail["#rikker_relate"])return!1;""!==t&&(tabEvent("#rikker_relate",t),e.preventDefault())}else if(38===a||40===a)selectUpDown("rikker_relate",a);else{"undefined"!=typeof ajax_request&&ajax_request.abort();var r="";8!==a?(r=String.fromCharCode(e.keyCode),t+=r):t=t.slice(0,-1),ajaxLoadingEmail["#rikker_relate"]=!0,showList("#rikker_relate",t)}}),$("#rikker_relate").blur(function(e){$().isClickWithoutDom({container:$(this),except:$(this).siblings(".rikker-result")})&&(value=$.trim($("#rikker_relate").val()),""!==value&&(tabEvent("#rikker_relate",value,{setText:1}),e.preventDefault()))}),$("#frm_create_css").on("keyup keypress",function(e){var a=e.keyCode||e.which;if(13===a)return e.preventDefault(),!1}),$(".btn-create").click(function(){if(validate())return!1;setMarginTopEndDate();var e=$(this);e.prop("disabled",!0),$("i.fa-refresh").removeClass("hidden");var a=$("#employee_id").val(),t=$.trim($("#japanese_name").val()),r=$("#set_pj").val(),n=$.trim($("#pm_email_jp").val()),i="",l=$("#token").val(),o=$("#create_or_update").val(),s=$("#css_id").val(),d=$("#start_date").val(),_=$("#end_date").val(),m=$("input[name=lang]:checked").val(),c=$("#project_name_css").val(),p=$("#time_reply").val(),v=$("#css_creator_name").val();$('input[name="rikker_relate[]"]').each(function(){i+=""==i?$.trim($(this).val()):","+$.trim($(this).val())}),$.ajax({url:baseUrl+"css/save",type:"post",dataType:"html",data:{_token:l,employee_id:a,japanese_name:t,projId:r,pm_name_jp:n,rikker_relate:i,create_or_update:o,css_id:s,start_date:d,end_date:_,lang:m,project_name_css:c,start_onsite_date:$("#start_onsite_date").val(),end_onsite_date:$("#end_onsite_date").val(),time_reply:p,css_creator_name:v}}).done(function(e){$("#rikker_relate_check").val(""),window.location.href=e}).fail(function(){alert("Ajax failed to fetch data"),e.prop("disabled",!1),e.find("i").addClass("hidden")})});for(var aryElDates=[{start:$("#start_date"),end:$("#end_date")},{start:$("#start_onsite_date"),end:$("#end_onsite_date")}],i=0;i<aryElDates.length;i++){var elDates=aryElDates[i],$startMonth=elDates.start,$endMonth=elDates.end;$startMonth.datepicker({format:"yyyy/mm/dd",autoclose:!0,endDate:$endMonth.val()}).on("changeDate",function(){$endMonth.datepicker("setStartDate",$startMonth.val())}),$endMonth.datepicker({format:"yyyy/mm/dd",autoclose:!0,startDate:$startMonth.val()}).on("changeDate",function(){$startMonth.datepicker("setEndDate",$endMonth.val())})}