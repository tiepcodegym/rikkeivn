function fixPointContainer(){var t=$(window).width(),s=$("#make-header").width(),a=$(".total-point-container ").outerWidth();if($(".visible-check").visible())$(".total-point-container ").css("position","inherit");else{$(".total-point-container ").css("position","fixed");var e=(t-s)/2;if(e<=a)$(".total-point-container ").css("right",e);else{var e=e-a;$(".total-point-container ").css("right",e)}}}$(document).ready(function(){fixPointContainer(),$(".rateit").bind("over",function(t,s){$("span.tooltip").remove(),$(this).before('<span class="tooltip"></span>'),$tooltip=$(this).parent().find("span.tooltip");var a=$(this).offset(),e=$(this).parent().offset(),n=a.left-e.left;switch(s){case 1:$tooltip.text(textUnsatisfactory),currentLang==jpLang?$tooltip.css("left",n-6):$tooltip.css("left",n-32);break;case 2:$tooltip.text(textSatisfactory),currentLang==jpLang?$tooltip.css("left",n+2):$tooltip.css("left",n-5);break;case 3:$tooltip.text(textFair),currentLang==jpLang?$tooltip.css("left",n+34):$tooltip.css("left",n+36);break;case 4:$tooltip.text(textGood),currentLang==jpLang?$tooltip.css("left",n+42):$tooltip.css("left",n+51);break;case 5:$tooltip.text(textExcellent),currentLang==jpLang?$tooltip.css("left",n+74):$tooltip.css("left",n+62);break;default:$(this).parent().find("span.tooltip").remove()}})}),$(window).scroll(function(){fixPointContainer()}),$(window).resize(function(){fixPointContainer()}),$(document).ready(function(){$.fn.textWidth=function(t,s){return $.fn.textWidth.fakeEl||($.fn.textWidth.fakeEl=$("<span>").hide().appendTo(document.body)),$.fn.textWidth.fakeEl.text(t||this.val()||this.text()).css("font",s||this.css("font")),$.fn.textWidth.fakeEl.width()},$("textarea.comment-question").on("keyup",function(t){const s=$(this).parent(".comment"),a=$(this).val();var e=!1;13===t.keyCode&&(e=!0),($(this).textWidth()>=$(this).width()||e)&&(console.log("adsafsa"),s.addClass("dropdown")),s.find(".dropdown-content").find("textarea").val(a)}),$(".dropdown-content>textarea").on("keyup",function(){const t=$(this).parent().parent(".comment"),s=$(this).val();t.find(".comment-question").val(s)}),$(".analysis").change(function(){var t=$(this).val(),s=$(this).data("questionid"),a=$(this).data("cssresultid"),e=$(".container-question").data("token"),n=$(".container-question").data("url"),i=$(".container-question").data("cssid");$(this).after('<span class="analysis-refresh"><i class="fa fa-refresh fa-spin"></i></span>'),$(this).css({border:"1px solid #ccc"}),$("textarea[name=analysis-question-"+s+"]").nextAll(".analysis-error").addClass("hidden"),$.ajax({url:n,type:"post",dataType:"json",data:{_token:e,questionId:s,cssResultId:a,cssId:i,analysisContent:t},success:function(t){RKExternal.notify(t.message),$(".analysis-error").addClass("hidden")}}).done(function(){$(".analysis-refresh").addClass("hidden")})}),$(".submit-status").click(function(){var t=$(this).data("cssid"),s=$(this).data("value"),a=$(this).data("url"),e=$(this).data("token"),n=$(".analysis").data("cssresultid"),i=JSON.parse($(".submit-resultDetailCss").val());$("#submit-status").prop("disabled",!0),$.ajax({url:a,type:"post",dataType:"json",data:{_token:e,cssId:t,statusCss:s,cssResultId:n},success:function(t){if($("#submit-status").prop("disabled",!1),1==t.success)RKExternal.notify(t.message),$("#status-css").addClass("btn-primary"),$("#status-css").removeClass("btn-danger"),$("#status-css").text("Submitted"),location.reload();else if(2==t.success)RKExternal.notify(t.message,!1);else if(i.length)for(var s=0;s<i.length;s++)i[s].point>0&&i[s].point<=3&&($("textarea[name=analysis-question-"+i[s].question_id+"]").val()||($("textarea[name=analysis-question-"+i[s].question_id+"]").css({border:"1px solid red"}),$("textarea[name=analysis-question-"+i[s].question_id+"]").focus(),$("textarea[name=analysis-question-"+i[s].question_id+"]").nextAll(".analysis-error").removeClass("hidden")))}})}),$(".btn-cancel-css-result").click(function(){var t=$(this).data("url"),s=$(this).data("token"),a=$(this).data("cssresultid");$.ajax({url:t,type:"post",dataType:"json",data:{_token:s,cssResultId:a},success:function(t){1==t.success?(RKExternal.notify(t.message),location.reload()):RKExternal.notify(t.message)}})}),$(".approve-status").click(function(){var t=$(".container-question").data("cssid"),s=$(".analysis").data("cssresultid"),a=$(this).data("value"),e=$(this).data("url"),n=$(".container-question").data("token");$("#approve-status").prop("disabled",!0),$.ajax({url:e,type:"post",dataType:"json",data:{_token:n,cssId:t,statusCss:a,cssResultId:s},success:function(t){1==t.success?($("#approve-status").prop("disabled",!1),RKExternal.notify(t.message),$("#status-css").addClass("btn-success"),$("#status-css").removeClass("btn-primary"),$("#status-css").removeClass("btn-danger"),$("#status-css").text("Approved"),location.reload()):($("#approve-status").prop("disabled",!1),RKExternal.notify(t.message,!1))}})}),$(".review-status").click(function(){var t=$(".container-question").data("cssid"),s=$(".analysis").data("cssresultid"),a=$(this).data("value"),e=$(this).data("url"),n=$(".container-question").data("token");$("#review-status").prop("disabled",!0),$.ajax({url:e,type:"post",dataType:"json",data:{_token:n,cssId:t,statusCss:a,cssResultId:s},success:function(t){$("#review-status").prop("disabled",!1),1==t.success?(RKExternal.notify(t.message),$("#status-css").addClass("btn-success"),$("#status-css").removeClass("btn-primary"),$("#status-css").removeClass("btn-danger"),$("#status-css").text("Reviewed"),location.reload()):($("#review-status").prop("disabled",!1),RKExternal.notify(t.message,!1))}})}),$(".feedback-status").click(function(){$("#modal-confirm-feedback-css").modal("show")}),$("#comment-analysis-css").click(function(){var t=$(".container-question").data("cssid"),s=$(".feedback-status").data("value"),a=$(".analysis").data("cssresultid"),e=$(".feedback-status").data("url"),n=$(".container-question").data("token"),i=$("#content-css").val();$("#comment-analysis-css").prop("disabled",!0),""==i?($("#content-css").css("border","1px solid red"),$(".comment-css-error").removeClass("hidden")):($("#content-css").css("border","1px solid #ccc"),$(".comment-css-error").addClass("hidden")),$.ajax({url:e,type:"post",dataType:"json",data:{_token:n,cssId:t,statusCss:s,content:i,cssResultId:a},success:function(t){1==t.success&&($("#comment-analysis-css").prop("disabled",!1),RKExternal.notify(t.message),location.reload())}})})});