function displayIssue(t,a){a=$(a),"open"===a.data("direction")?$.ajax({url:urlTaskChild,type:"post",dataType:"html",data:{_token:token,taskId:t,hasColumnProject:1,index:a.closest("tr").find("td.index").text()},success:function(t){a.closest("tr").after(t),a.data("direction","close"),a.find("span.glyphicon").removeClass("glyphicon-menu-down").addClass("glyphicon-menu-up")},error:function(){},complete:function(){}}):($("tr[data-parent-id="+a.data("id")+"]").remove(),a.data("direction","open"),a.find("span.glyphicon").removeClass("glyphicon-menu-up").addClass("glyphicon-menu-down"))}function getUrlRisk(){var t=urlRisks;return t+="?content="+$("#tbl-risk .filter-content").val(),t+="&weakness="+$("#tbl-risk .filter-weakness").val(),t+="&status="+$("#tbl-risk .filter-status").val(),t+="&level_important="+$("#tbl-risk .filter-level_important").val(),t+="&owner="+$("#tbl-risk .filter-owner").val(),t+="&project="+$("#tbl-risk .filter-project").val()}function displayTaskRisk(t,a,e){a=$(a),"open"===a.data("direction")?$.ajax({url:urlTaskRisk,type:"post",dataType:"html",data:{_token:token,riskId:t,index:e},success:function(t){a.closest("tr").after(t),a.data("direction","close"),a.find("span.glyphicon").removeClass("glyphicon-menu-down").addClass("glyphicon-menu-up")},error:function(){},complete:function(){}}):($("tr[data-risk-id="+a.data("id")+"]").remove(),a.data("direction","open"),a.find("span.glyphicon").removeClass("glyphicon-menu-up").addClass("glyphicon-menu-down"))}var pageLength=20,tblFeedbacks=$("#tbl-feedback").DataTable({processing:!0,lengthChange:!1,bFilter:!1,serverSide:!0,ajax:urlFeedbacks,pageLength:pageLength,order:[[3,"asc"]],columnDefs:[{sortable:!1,"class":"index",targets:"no-sort"}],columns:[{data:"",name:""},{data:"project_name",name:"project_name"},{data:"title",name:"title"},{data:"status",name:"status"},{data:"priority",name:"priority"},{data:"type",name:"type"},{data:"email",name:"email"},{data:"created_at",name:"created_at"},{data:"duedate",name:"duedate"},{data:"count_issues",name:"count_issues"},{data:"",name:""}],fnDrawCallback:function(){var t=tblFeedbacks.page.info();$("#tbl-feedback tbody tr").each(function(a){$(this).find("td:nth-child(1)").not(".dataTables_empty").html(t.page*pageLength+a+1)})}});$("#tbl-feedback thead").append($("#tbl-feedback2 thead").html());var tblMyTasks=$("#tbl-my-task").DataTable({processing:!0,lengthChange:!1,bFilter:!1,serverSide:!0,ajax:urlMyTasks,pageLength:pageLength,order:[[5,"asc"]],columnDefs:[{sortable:!1,targets:"no-sort"}],columns:[{data:"",name:""},{data:"title",name:"title"},{data:"assignee",name:"assignee"},{data:"project_name",name:"project_name"},{data:"email",name:"email"},{data:"status",name:"status"},{data:"priority",name:"priority"},{data:"created_at",name:"created_at"},{data:"duedate",name:"duedate"}],fnDrawCallback:function(){var t=tblMyTasks.page.info();$("#tbl-my-task tbody tr").each(function(a){$(this).find("td:nth-child(1)").not(".dataTables_empty").html(t.page*pageLength+a+1)})}});$("#tbl-my-task thead").append($("#tbl-my-task2 thead").html()),$(function(){function t(){var t=urlMyTasks;return t+="?title="+$("#tbl-my-task .filter-title").val(),t+="&assignee="+$("#tbl-my-task .filter-assignee").val(),t+="&project_name="+$("#tbl-my-task .filter-project_name").val(),t+="&pm="+$("#tbl-my-task .filter-pm").val(),t+="&status="+$("#tbl-my-task .filter-status").val(),t+="&priority="+$("#tbl-my-task .filter-priority").val(),t+="&created_at="+$("#tbl-my-task .filter-created_at").val(),t+="&duedate="+$("#tbl-my-task .filter-duedate").val()}function a(){var t=urlFeedbacks;return t+="?title="+$("#tbl-feedback .filter-title").val(),t+="&assignee="+$("#tbl-feedback .filter-assignee").val(),t+="&status="+$("#tbl-feedback .filter-status").val(),t+="&priority="+$("#tbl-feedback .filter-priority").val(),t+="&created_at="+$("#tbl-feedback .filter-created_at").val(),t+="&duedate="+$("#tbl-feedback .filter-duedate").val(),t+="&type="+$("#tbl-feedback .filter-type").val(),t+="&project_name="+$("#tbl-feedback .filter-project_name").val()}$(".dateMyTasks").datepicker({todayBtn:"linked",autoclose:!0,todayHighlight:!0,dateFormat:"yy-mm-dd",onSelect:function(){tblMyTasks.ajax.url(t()).load()}}),$(".dateFeedbacks").datepicker({todayBtn:"linked",autoclose:!0,todayHighlight:!0,dateFormat:"yy-mm-dd",onSelect:function(){tblFeedbacks.ajax.url(a()).load()}}),$(".dateRisks").datepicker({todayBtn:"linked",autoclose:!0,todayHighlight:!0,dateFormat:"yy-mm-dd",onSelect:function(){tblRisks.ajax.url(getUrlRisk()).load()}}),$("#tbl-my-task thead tr.row-filter select").change(function(){tblMyTasks.ajax.url(t()).load()}),$("#tbl-my-task thead tr.row-filter input[type=text]").keyup(function(a){var e=a.keyCode||a.which;13===e&&tblMyTasks.ajax.url(t()).load()}),$("#tbl-feedback thead tr.row-filter select").change(function(){tblFeedbacks.ajax.url(a()).load()}),$("#tbl-feedback thead tr.row-filter input[type=text]").keyup(function(t){var e=t.keyCode||t.which;13===e&&tblFeedbacks.ajax.url(a()).load()})}),$(document).on("click","a.post-ajax",function(){$.ajax({url:$(this).data("url-ajax"),type:"post",dataType:"json",data:{_token:token},success:function(t){$("#modal-task_detail .modal-body").html(t.htmlModal),$("#modal-task_detail").modal("show"),console.log(t.htmlModal)},error:function(){},complete:function(){}})});var tblRisks=$("#tbl-risk").DataTable({processing:!0,lengthChange:!1,bFilter:!1,serverSide:!0,ajax:urlRisks,pageLength:pageLength,order:[[4,"desc"]],columnDefs:[{sortable:!1,targets:"no-sort"}],columns:[{data:"",name:""},{data:"project_name",name:"project_name"},{data:"content",name:"content"},{data:"weakness",name:"weakness"},{data:"level_important",name:"level_important"},{data:"owner",name:"owner"},{data:"status",name:"status"},{data:"count_task",name:"count_task"},{data:"",name:""}],fnDrawCallback:function(){var t=tblRisks.page.info();$("#tbl-risk tbody tr").each(function(a){var e=t.page*pageLength+a+1;$(this).find("td:nth-child(1)").not(".dataTables_empty").html(e);var l=$(this).find(".count-task");l.attr("onclick","displayTaskRisk("+l.data("id")+", this, "+(e-1)+")")})}});$("#tbl-risk thead").append($("#tbl-risk2 thead").html()),$("#tbl-risk thead tr.row-filter select").change(function(){tblRisks.ajax.url(getUrlRisk()).load()}),$("#tbl-risk thead tr.row-filter input[type=text]").keyup(function(t){var a=t.keyCode||t.which;13===a&&tblRisks.ajax.url(getUrlRisk()).load()});