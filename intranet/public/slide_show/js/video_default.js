function getYouTubeId(e){return getVideoId(e,["youtube.com/watch?v=","youtu.be/","youtube.com/embed/"])}function getVideoId(e,r){for(var i=e.replace(/^(https?:)?\/\/(www\.)?/,""),t=0;t<r.length;t++)if(0===i.indexOf(r[t]))return i.substr(r[t].length)}jQuery(document).ready(function(e){e(document).on("change","#file_video",function(r){var i=window.URL||window.webkitURL;e(".file-video-error").remove(),$this=this;var t=$this.files[0],o=document.querySelector(".preview-video video");if("undefined"!=typeof t){var a=t.type,d=o.canPlayType(a);""===d&&(d="no");var l="no"===d;if(l)return e(this).val(""),void alert("You must upload video");t.size/1024/1024>200&&alert("You must be less than 200 MB");var s=i.createObjectURL(t);o.src=s,e(".file-video-error").remove(),e(".preview-video").removeClass("display-none")}else o.src="",e(".preview-video").addClass("display-none")}),e(document).on("change",".url",function(r){value=e(this).val().trim(),videoId=getYouTubeId(value),classPreview=e(".preview-video"),e(".error-url").remove(),"undefined"==typeof videoId?(classPreview.find("iframe").attr("src",""),classPreview.addClass("display-none"),e("#fr-upload-video").find("input.url").after('<p class="word-break error-validate error error-url" for="url">'+e(this).attr("data-incorrect")+"</p>")):(src="https://www.youtube.com/embed/"+videoId+"?playlist="+videoId+"&loop=1&autoplay=1&cc_load_policy=1&rel=0&amp;controls=1&amp;showinfo=0&vq=hd1080",classPreview.find("iframe").attr("src",src),classPreview.removeClass("display-none"))}),e(document).on("click",".btn-upload",function(r){if($this=e(this),r.preventDefault(),$this.hasClass("requestRunning"))return!1;e(".error-validate").remove();var i=!1;return formName=e("#fr-upload-video"),title=formName.find("input.title"),url=formName.find("input.url"),title.val().trim()||(i=!0,formName.find("input.title").after('<p class="word-break error-validate error error-title" for="title">'+title.attr("data-message")+"</p>")),url.val().trim()?(urlVideoYoutube=formName.find(".url"),videoId=getYouTubeId(urlVideoYoutube.val().trim()),"undefined"==typeof videoId?(i=!0,classPreview=e(".preview-video"),classPreview.find("iframe").attr("src",""),classPreview.addClass("display-none"),formName.find("input.url").after('<p class="word-break error-validate error error-url" for="url">'+urlVideoYoutube.attr("data-incorrect")+"</p>")):e(".url").val(videoId)):(i=!0,formName.find("input.url").after('<p class="word-break error-validate error error-url" for="url">'+title.attr("data-message")+"</p>")),!i&&($this.addClass("requestRunning"),$this.attr("disabled","disabled"),$this.find(".fa-spin").removeClass("display-none"),void formName.submit())})});