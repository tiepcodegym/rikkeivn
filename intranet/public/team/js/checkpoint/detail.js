function selectRank(e){$(e).parent().find(".container-question-child").removeClass("point-rank").removeClass("btn-danger").removeClass("rank-review"),$(e).parent().find(".container-question-child").each(function(){$(this).hasClass("btn-primary")||$(this).addClass("btn-default")}),$(e).hasClass("btn-primary")||$(e).addClass("btn-danger").removeClass("btn-default").addClass("rank-review"),$(e).addClass("point-rank"),$(".total-point-container-leader .total-point").html(getTotalPoint()),setCookie()}function setCookie(){var e=$("#checkpoint_id").val(),t=$("#emp_id").val(),o=$("#result_id").val(),n=$("#proposed-leader").val(),a=[],i="proposed_current["+e+"]["+t+"]["+o+"]";$(".container-question-child.rank-review").each(function(){var e=parseInt($(this).data("rank")),t=$(this).data("questionid"),o=$(".comment-question-leader[data-questionid='"+t+"']").val();a.push([t,e,o])}),$.removeCookie("checkpoint_current["+e+"]["+t+"]["+o+"]"),$.removeCookie("totalPoint_current["+e+"]["+t+"]["+o+"]"),$.removeCookie(i),$.cookie.json=!0,$.cookie("checkpoint_current["+e+"]["+t+"]["+o+"]",a,{expires:7}),$.cookie(i,funcJsonValue.encode(n),{expires:7})}function getTotalPoint(){var e=0;return $(".container-question").each(function(){if($(this).find(".container-question-child.point-rank").length>0){var t=$(this).find(".container-question-child.point-rank").data("rank"),o=$(this).find(".container-question-child.point-rank").data("weight");e+=parseFloat(t*o/100)}}),e.toFixed(2)}function confirm(){var e=!1;return $("#modal-confirm").modal("hide"),e?($("#modal-confirm").modal("show"),!1):(isLeader?($("#modal-submit .modal-body").html(leaderConfirmSubmitText),$("#modal-submit .modal-footer button.submit").html(submitText)):($("#modal-submit .modal-body").html("Số điểm hiện tại là "+getTotalPoint()+". Bạn có chắc chắn muốn hoàn thành bài Checkpoint?"),$("#modal-submit .modal-footer button.submit").html(guiBai)),void $("#modal-submit").modal("show"))}function submit(e,t,o,n,t){var a=getTotalPoint(),i=$("#proposed-leader").val(),r=[];$(".container-question-child.point-rank").each(function(){var e=parseInt($(this).data("rank")),t=$(this).data("questionid"),o=$(".comment-question-leader[data-questionid='"+t+"']").val();r.push([t,e,o])}),$(".apply-click-modal").show(),$.ajax({url:baseUrl+"team/checkpoint/save_result_leader",type:"post",dataType:"html",data:{_token:e,arrayQuestion:r,totalPoint:a,proposed:i,resultId:t}}).done(function(){$(".comment-question-leader").val(""),$(".proposed-leader").val("");var e="checkpoint_current["+o+"]["+n+"]["+t+"]",a="proposed_current["+o+"]["+n+"]["+t+"]";removeItem(e),removeItem(a),location.href=baseUrl+"team/checkpoint/list"}).fail(function(){alert("Ajax failed to fetch data")})}function removeItem(e,t,o){document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(t?"; path="+t:"")}function makeNewTurn(e,t,o){var n="checkpoint_current["+e+"]["+t+"]["+o+"]",a="proposed_current["+e+"]["+t+"]["+o+"]";removeItem(n),removeItem(a),location.reload()}fixHeight(),$(window).resize(function(){fixHeight()}),jQuery(document).ready(function(e){hoverHelp();var t,o=e("#checkpoint_id").val(),n=e("#emp_id").val(),a=e("#result_id").val();if(e.cookie("proposed_current["+o+"]["+n+"]["+a+"]")&&e("#proposed-leader").val(funcJsonValue.decode(e.cookie("proposed_current["+o+"]["+n+"]["+a+"]"))),e.cookie("checkpoint_current["+o+"]["+n+"]["+a+"]")){t=JSON.parse(e.cookie("checkpoint_current["+o+"]["+n+"]["+a+"]"));for(var i=0;i<t.length;i++)e('div[data-questionid="'+t[i][0]+'"]').removeClass("point-rank").removeClass("btn-danger").removeClass("rank-review"),e('div[data-questionid="'+t[i][0]+'"][data-rank="'+t[i][1]+'"]').addClass("point-rank").addClass("btn-danger").addClass("rank-review").removeClass("btn-default"),e('.comment-question-leader[data-questionid="'+t[i][0]+'"]').val(t[i][2]);e(".rank-review").parent().find(".btn-primary").removeClass("point-rank"),e(".total-point-container-leader .total-point").html(getTotalPoint())}e(".comment-question-leader").keyup(function(){setCookie()}),e("textarea").keyup(function(){setCookie()})}),1==canEdit&&$(".hover-rank-detail").hover(function(){$(this).hasClass("border-blue")||$(this).css("border","#da3d7e solid 2px")},function(){$(this).hasClass("border-blue")||$(this).css("border","none")}),$(window).load(function(){$(".se-pre-con").fadeOut("slow")});var funcJsonValue={encode:function(e){return{1:e}},decode:function(e){return e?JSON.parse(e)[1]:null}};