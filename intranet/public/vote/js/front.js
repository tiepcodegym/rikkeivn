function showModalError(e){var t=$("#modal-warning-notification");"undefined"==typeof e&&(e="Error!"),t.find(".text-default").html(e),t.modal("show")}!function(e){e(".multi-select").each(function(){var t=e(this).data("url");e(this).select2({ajax:{url:t,dataType:"json",delay:500,data:function(e){return{q:e.term,page:e.page,typeExclude:"current"}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:20*t.page<e.total_count}}},cache:!0,minimumInputLength:1}})}),e("#nominee_form").validate({ignore:[],rules:{nominee_id:{required:function(){return e('[name="nominee_id"]').length>0}},reason:{required:!0}},messages:{nominee_id:{required:textValidRequired},reason:{required:textValidRequired}}}),e(".vote-box a").click(function(t){if(t.preventDefault(),!e(this).hasClass("processing")){var n=e(this).parent(),s=e(this).attr("href");e(this).addClass("processing");var a=e(this),o=a.closest(".nominee"),i=n.find(".v_loading");n.find("a").addClass("hidden"),i.removeClass("hidden"),e.ajax({type:"POST",url:s,data:{_token:siteConfigGlobal.token,type:e(this).data("type")},success:function(t){var s=e(".num_left_over"),a=parseInt(s.text());t.add_vote?(n.find(".cancel").removeClass("hidden"),o.addClass("had_voted"),a>0&&s.text(a-1)):(n.find(".vote").removeClass("hidden"),o.removeClass("had_voted"),s.text(a+1))},error:function(e){a.removeClass("hidden"),showModalError(e.responseJSON)},complete:function(){a.removeClass("processing"),i.addClass("hidden")}})}});var t=15,n=90,s=3;e(".content-more").each(function(){var a=e(this).prev(".content-show"),o=e(this).html(),i=o.split("\n"),r=o.split(" "),l="",d="",h=!1;if(i.length>s&&(h=!0,o=i.splice(0,s).join("\n"),d=i.join("\n"),r=o.split("\n")),o.length>n||r.length>t?(h=!0,o.length>n?(l=o.substr(0,n),d=o.substr(n,o.length-n)):(l=r.splice(0,t).join(" "),d=r.join(" "))):l=o,h){var c=l+'<span class="more-box"><span class="more-char"> ... </span><span class="more-text"> '+d+'</span><a href="#vote_desc_more" data-toggle="modal" class="more-link">'+textViewMore+"</a></span>";a.html(c)}else a.html(o)}),e("#vote_desc_more").on("show.bs.modal",function(t){var n=e(t.relatedTarget),s=n.closest(".nominee"),a=s.find(".nominee-name span").text(),o=e(this);o.find(".nominee-name").text(a),o.find(".modal-body").html(s.find(".nominee-desc .content-more").html())});var a=100;e(".vote-content").each(function(){var t=e(this).parent().find(".more-link");e(this).height()>=a&&t.removeClass("hidden")}),e(".vote-desc .more-link a").click(function(t){t.preventDefault();var n=e(this).data("textMore"),s=e(this).data("textLess"),a=e(this).closest(".vote-desc");a.hasClass("show-full")?(a.removeClass("show-full"),e(this).text(n)):(a.addClass("show-full"),e(this).text(s))})}(jQuery);